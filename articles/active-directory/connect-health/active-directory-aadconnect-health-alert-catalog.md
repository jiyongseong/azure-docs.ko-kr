---
title: Azure AD Connect Health - 경고 카탈로그 | Microsoft Docs
description: 이 문서에서는 Azure AD Connect Health의 모든 경고에 대한 카탈로그를 보여 줍니다.
services: active-directory
documentationcenter: ''
author: zhiweiwangmsft
manager: maheshu
editor: ''
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/15/2018
ms.author: zhiweiw
ms.openlocfilehash: fc754237f2bc964845536680538a71c225abb60d
ms.sourcegitcommit: 1362e3d6961bdeaebed7fb342c7b0b34f6f6417a
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/18/2018
---
# <a name="azure-active-directory-connect-health-alert-catalog"></a>Azure Active Directory Connect Health 경고 카탈로그 

Azure AD Connect Health 서비스의 보내기 경고는 ID 인프라가 정상 상태가 아님을 나타냅니다. 이 문서에는 각 경고에 대한 경고 제목, 설명 및 수정 단계가 포함되어 있습니다. <br />
오류, 경고 및 사전 경고는 Connect Health 서비스에서 생성되는 경고의 세 단계입니다. 트리거된 알림에 대한 작업을 즉시 수행하는 것이 좋습니다. <br />
Azure AD Connect Health 경고는 성공 조건에서 해결됩니다. Azure AD Connect Health 에이전트가 정기적으로 성공 조건을 검색하여 서비스에 보고합니다. 일부 경고의 경우 시간을 기준으로 경고가 제거됩니다. 즉, 동일한 오류 조건이 경고 생성으로부터 72시간 내에 관찰되지 않으면 경고가 자동으로 해결됩니다.

## <a name="general-alerts"></a>일반 경고

| 경고 이름 | 설명 | 재구성 |
| --- | --- | ----- |
| 상태 관리 서비스 데이터가 최신 상태가 아님 | 하나 이상의 서버에서 실행 중인 상태 에이전트가 상태 관리 서비스에 연결되어 있지 않으며 상태 관리 서비스는 이 서버의 최신 데이터를 받고 있지 않습니다. 상태 관리 서비스에서 마지막으로 처리한 데이터는 2시간 이상 전의 데이터입니다. | 상태 에이전트에 필요한 서비스 엔드포인트에 대한 아웃바운드 연결이 있는지 확인합니다. [자세히 알아보기](active-directory-aadconnect-health-data-freshness.md) |

## <a name="alerts-for-azure-ad-connect-sync"></a>Azure AD Connect(동기화)에 대한 경고

| 경고 이름 | 설명 | 재구성 |
| --- | --- | ----- |
| Azure AD Connect 동기화 서비스가 실행되고 있지 않습니다. | Microsoft Azure AD 동기화 Windows 서비스가 실행되고 있지 않거나 시작할 수 없습니다. 이로 인해 개체가 Azure Active Directory와 동기화되지 않습니다. | Microsoft Azure Active Directory 동기화 서비스를 시작합니다.</b> <ol> <li><b>시작</b>, <b>실행</b>을 차례로 클릭하고, <b>Services.msc</b>를 입력한 다음, <b>확인</b>을 클릭합니다.</li> <li><b>Microsoft Azure AD 동기화 서비스</b>를 찾은 다음, 서비스가 시작되었는지 확인합니다. 서비스가 시작되지 않은 경우 서비스를 마우스 오른쪽 단추로 클릭한 다음, <b>시작</b>을 클릭합니다. | 
| Azure Active Directory에서 가져오지 못했습니다. | Azure Active Directory Connector에서 가져오기 작업이 실패했습니다. |  가져오기 작업에 대한 이벤트 로그 오류에서 자세한 내용을 조사합니다.  |
| 인증 실패로 인해 Azure Active Directory에 연결하지 못했습니다. | 인증 실패로 인해 Azure Active Directory에 연결하지 못했습니다. 이에 따라 개체가 Azure Active Directory와 동기화되지 않습니다.  | 이벤트 로그 오류에서 자세한 내용을 조사합니다. |
| Active Directory로 내보내지 못했습니다. | Active Directory Connector로 내보내기 작업이 실패했습니다. | 내보내기 작업에 대한 이벤트 로그 오류에서 자세한 내용을 조사합니다. | 
| Active Directory에서 가져오지 못했습니다. | Active Directory에서 가져오지 못했습니다. 이로 인해 이 포리스트의 일부 도메인에 있는 개체를 가져올 수 없습니다. | <li>DC 연결 확인</li> <li>수동으로 가져오기 다시 실행</li> <li> 가져오기 작업에 대한 이벤트 로그 오류에서 자세한 내용을 조사합니다. | 
| Azure Active Directory로 내보내지 못했습니다. | Azure Active Directory Connector로 내보내기 작업이 실패했습니다. 이로 인해 일부 개체를 Azure Active Directory로 성공적으로 내보낼 수 없습니다. | 내보내기 작업에 대한 이벤트 로그 오류에서 자세한 내용을 조사합니다. |
| 지난 120분 동안 암호 해시 동기화 하트비트를 건너뛰었습니다. | 암호 해시 동기화는 지난 120분 동안 Azure Active Directory와 연결되지 않았습니다. 이로 인해 암호가 Azure Active Directory와 동기화되지 않습니다. | Microsoft Azure Active Directory 동기화 서비스를 다시 시작합니다.</b><br> 현재 실행 중인 모든 동기화 작업이 중단됩니다. 진행 중인 동기화 작업이 없는 경우 아래 단계를 수행할 수 있습니다.<br> 1. <b>시작</b>, <b>실행</b>을 차례로 클릭하고, <b>Services.msc</b>를 입력한 다음, <b>확인</b>을 클릭합니다.<br> 2. <b>Microsoft Azure AD 동기화</b>를 찾아 마우스 오른쪽 단추로 클릭한 다음, <b>다시 시작</b>을 클릭합니다. | 
| 높은 CPU 사용량이 감지됨 | 이 서버에서 CPU 사용률이 권장 임계값을 초과했습니다. | <li>이로 인해 CPU 사용량이 일시적으로 급증할 수 있습니다. 모니터링 섹션에서 CPU 사용량 추세를 확인합니다.</li><li>서버에서 가장 높은 CPU 사용량을 소모하는 상위 프로세스를 검사합니다.<ol type="a"><li>작업 관리자를 사용하거나 다음 PowerShell 명령을 실행할 수 있습니다. <br> <i>get-process \| Sort-Object -Descending CPU \| Select-Object -First 10</i></li><li>CPU 사용량이 많은 예기치 않은 프로세스가 있는 경우 다음 PowerShell 명령을 사용하여 프로세스를 중지합니다. <br> <i>stop-process -ProcessName [프로세스 이름]</i></li></li></ol><li>위의 목록에 표시된 프로세스가 서버에서 실행되는 의도된 프로세스이고 CPU 사용량이 계속 임계값에 근접하고 있는 경우 이 서버의 배포 요구 사항을 다시 평가해 보세요.</li><li>fail-safe 옵션으로 서버를 다시 시작하는 것이 좋습니다. |
| 높은 메모리 사용량이 감지됨 | 이 서버에서 메모리 사용률이 권장 임계값을 넘었습니다. | 서버에서 가장 많은 메모리를 소모하는 상위 프로세스를 검사합니다. 작업 관리자를 사용하거나 다음 PowerShell 명령을 실행할 수 있습니다.<br> <i>get-process \| Sort-Object -Descending WS \| Select-Object -First 10</i> </br> 많은 메모리를 사용하는 예기치 않은 프로세스가 있는 경우 다음 PowerShell 명령을 사용하여 프로세스를 중지합니다.<br><i>stop-process -ProcessName [프로세스 이름] </i></li><li> 위 목록에 표시된 프로세스가 서버에서 실행되는 의도된 프로세스인 경우 이 서버의 배포 요구 사항을 다시 평가해 보세요.</li><li>failsafe 옵션으로 서버를 다시 시작하는 것이 좋습니다. | 
| 암호 해시 동기화가 중지되었습니다. | 암호 해시 동기화가 중지되었습니다. 이로 인해 암호가 Azure Active Directory와 동기화되지 않습니다. | Microsoft Azure Active Directory 동기화 서비스를 다시 시작합니다. <br /> 현재 실행 중인 모든 동기화 작업이 중단됩니다. 진행 중인 동기화 작업이 없는 경우 아래 단계를 수행할 수 있습니다. <br /> <ol> <li><b>시작</b>, <b>실행</b>을 차례로 클릭하고, <b>Services.msc</b>를 입력한 다음, <b>확인</b>을 클릭합니다.</li> <li><b>Microsoft Azure AD 동기화</b>를 찾아 마우스 오른쪽 단추로 클릭한 다음, <b>다시 시작</b>을 클릭합니다.</li> </ol> </p>  | 
| Azure Active Directory로 내보내기가 중지되었습니다. 실수로 삭제 임계값에 도달했습니다. | Azure Active Directory로 내보내기 작업이 실패했습니다. 구성된 임계값보다 삭제할 개체가 더 많습니다. 이로 인해 내보낼 개체가 없습니다. | <li> 삭제 표시된 개체 수가 설정된 임계값보다 큽니다. 이 결과가 필요한지 확인합니다.</li> <li> 내보내기를 계속하려면 다음 단계를 수행합니다. <ol type="a"> <li>Disable-ADSyncExportDeletionThreshold를 실행하여 임계값을 사용하지 않도록 설정합니다.</li> <li>동기화 서비스 관리자를 시작합니다.</li> <li>type = Azure Active Directory를 사용하여 Connector에서 내보내기를 실행합니다.</li> <li>개체가 성공적으로 내보내지면 Enable-ADSyncExportDeletionThreshold를 실행하여 임계값을 사용하도록 설정합니다.</li> </ol> </li> |

## <a name="alerts-for-active-directory-federation-services"></a>Active Directory Federation Services에 대한 경고
| 경고 이름 | 설명 | 재구성 |
| --- | --- | ----- |
|테스트 인증 요청(가상 트랜잭션)이 토큰을 가져오지 못했습니다. | 이 서버에서 시작된 테스트 인증 요청(가상 트랜잭션)은 5회 재시도 후 토큰을 가져오지 못했습니다. 이는 일시적인 네트워크 문제, AD DS 도메인 컨트롤러 가용성 또는 잘못 구성된 AD FS 서버로 인해 발생할 수 있습니다.  이에 따라 페더레이션 서비스에서 처리한 인증 요청이 실패할 수 있습니다. 에이전트는 로컬 컴퓨터 계정 컨텍스트를 사용하여 페더레이션 서비스에서 토큰을 가져옵니다. | 다음 단계에 따라 서버의 상태를 확인합니다.<ol><li>팜에 있는 해당 AD FS 서버 또는 다른 AD FS 서버에 대해 확인되지 않은 추가 경고가 없는지 확인합니다.</li><li>https://{your_adfs_server_name}/adfs/ls/idpinitiatedsignon.aspx에서 사용할 있는 AD FS 로그인 페이지에서 테스트 사용자로 로그온하여 일시적인 오류가 아닌지 확인합니다.</li><li><a href="https://testconnectivity.microsoft.com">https://testconnectivity.microsoft.com</a>으로 이동하고 'Office 365' 탭을 선택합니다. 'Office 365 Single Sign-On 테스트'를 수행합니다.</li><li>이 서버의 명령 프롬프트에서 다음 명령을 실행하여 이 서버에서 AD FS 서비스 이름을 확인할 수 있는지 확인합니다. nslookup your_adfs_server_name</li></ol><p>서비스 이름을 확인할 수 없는 경우 FAQ 섹션에서 이 서버의 IP 주소와 함께 AD FS 서비스의 HOST 파일 항목을 추가하는 지침을 참조하세요. 그러면 이 서버에서 실행되는 가상 트랜잭션 모듈이 토큰을 요청할 수 있습니다.</p> | 
| 프록시 서버를 페더레이션 서버에 연결할 수 없습니다. | 이 AD FS 프록시 서버는 ADFS 서비스에 연결할 수 없습니다. 이로 인해 이 서버에서 처리하는 인증 요청이 실패합니다. | 이 서버와 AD FS 서비스 간의 연결을 확인하려면 다음 단계를 수행합니다. <ol><li> 이 서버와 AD FS 서비스 간의 방화벽이 정확하게 구성되어 있는지 확인합니다. </li><li> AD FS 서비스 이름에 대한 DNS 확인이 회사 네트워크 내에 있는 AD FS 서비스를 적절하게 가리키고 있는지 확인합니다. 경계 네트워크에서 이 서버를 제공하는 DNS 서버 또는 ADFS 서비스 이름에 대한 HOSTS 파일의 항목을 통해 이 작업을 수행할 수 있습니다. </li><li> 이 서버에서 브라우저를 열고, https://<your-adfs-service-name>/federationmetadata/2007-06/federationmetadata.xml에 있는 페더레이션 메타데이터 엔드포인트에 액세스하여 네트워크 연결을 확인합니다. </li> | 
| SSL 인증서가 곧 만료됩니다. | 페더레이션 서버에서 사용하는 SSL 인증서가 90일 이내에 만료됩니다. 만료되면 유효한 SSL 연결을 요구하는 모든 요청이 실패합니다. 예를 들어 Office 365 고객의 경우 메일 클라이언트에서 인증할 수 없습니다. | 각 AD FS 서버에서 SSL 인증서를 업데이트합니다.<ol><li>다음 요구 사항에 따라 SSL 인증서를 가져옵니다.<ol type="a"><li>확장된 키 사용은 적어도 서버 인증입니다. </li><li>인증서 주체 또는 SAN(주체 대체 이름)에는 페더레이션 서비스의 DNS 이름이나 적절한 와일드카드가 포함됩니다. 예: sso.contoso.com 또는 *.contoso.com</li></ol></li><li>로컬 컴퓨터 인증서 저장소의 각 서버에 새 SSL 인증서를 설치합니다.</li><li>AD FS 서비스 계정에 인증서의 개인 키에 대한 읽기 권한이 있는지 확인합니다.</li></ol></p><p><b>Windows Server 2008 R2에 있는 AD FS 2.0의 경우:</b><ul><li>새 SSL 인증서를 페더레이션 서비스를 호스팅하는 IIS의 웹 사이트에 바인딩합니다. 각 페더레이션 서버 및 페더레이션 서버 프록시에서 이 단계를 수행해야 합니다.</li></ul></p><p><b>Windows Server 2012 R2 이상 버전에 있는 AD FS의 경우:</b> <li>  <a href="https://docs.microsoft.com/windows-server/identity/ad-fs/operations/manage-ssl-certificates-ad-fs-wap">AD FS 및 WAP에서 SSL 인증서 관리</a> 참조 </li> | 
| AD FS 서비스가 서버에서 실행되고 있지 않습니다. | Active Directory Federation Service(Windows 서비스)가 이 서버에서 실행되고 있지 않습니다. 이 서버를 대상으로 하는 모든 요청이 실패합니다. | Active Directory Federation Service(Windows 서비스)를 시작하려면 다음을 수행합니다.<ol><li>관리자 권한으로 서버에 로그온합니다.</li><li> services.msc를 엽니다.</li><li>"Active Directory Federation Services"를 찾습니다. </li><li>마우스 오른쪽 단추로 클릭하고 "시작"을 선택합니다. | 
| 페더레이션 서비스의 DNS가 잘못 구성되었을 수 있습니다. | DNS 서버는 AD FS 팜 이름에 CNAME 레코드를 사용하도록 구성할 수 있습니다. Windows 통합 인증이 회사 네트워크 내에서 원활하게 작동하려면 AD FS에 A 또는 AAAA 레코드를 사용하는 것이 좋습니다. | <Farm Name> AD FS 팜의 DNS 레코드 종류가 CNAME이 아닌지 확인합니다. A 또는 AAAA 레코드로 구성합니다. | 
| AD FS 감사를 사용할 수 없습니다. | 서버에서 AD FS 감사를 사용할 수 없습니다. 포털의 AD FS 사용 현황 섹션에는 이 서버의 데이터가 포함되지 않습니다. | AD FS 감사를 사용할 수 없는 경우 다음 지침을 따릅니다.<ol><li>ADFS 서버에서 "보안 감사 생성" 권한을 ADFS 서비스 계정에 부여합니다.<li>gpedit.msc 서버에서 로컬 보안 정책을 엽니다.</li><li>"Computer Configuration\Windows Settings\Local Policies\User Rights Assignment"로 이동합니다. </li><li>"보안 감사 생성" 권한을 부여받도록 ADFS 서비스 계정을 추가합니다.</li></li><li>명령 프롬프트에서 다음 명령을 실행합니다.<br><i>auditpol.exe /set /subcategory:"Application Generated" /failure:enable /success:enable</i></li><li>성공 및 실패 감사가 포함되도록 페더레이션 서비스 속성을 업데이트합니다.<li>ADFS 콘솔에서 "페더레이션 서비스 속성 편집"을 선택합니다.</li><li>"페더레이션 서비스 속성" 대화 상자에서 [이벤트] 탭을 선택하고 "성공 감사" 및 "실패 감사"를 선택합니다.</li></li></ol></p><p>이러한 단계가 완료되면 AD FS 감사 이벤트가 이벤트 뷰어에 표시됩니다. 확인하려면 다음을 수행합니다.<ol><li>이벤트 뷰어 / Windows 로그 / 보안으로 차례로 이동합니다.</li><li>[현재 로그 필터링]을 선택하고 [이벤트 원본] 드롭다운에서 [AD FS 감사]를 선택합니다. AD FS 감사를 사용하도록 설정된 활성 AD FS 서버의 경우 이벤트가 위의 필터링에 표시됩니다.</li></ol></p><p>앞에서 이러한 지침을 수행했지만 이 경고가 계속 표시되는 경우, 그룹 정책 개체에서 AD FS 감사를 사용하지 않도록 설정했을 수 있습니다. 근본 원인은 다음 중 하나일 수 있습니다.<ol><li>AD FS 서비스 계정이 보안 감사 생성 권한이 있는 상태에서 제거되었습니다.</li><li>그룹 정책 개체의 사용자 지정 스크립트에서 "응용 프로그램 생성됨" 상태에 따라 성공 및 실패 감사를 사용하지 않도록 설정되었습니다.</li><li>AD FS 구성이 성공/실패 감사를 생성하도록 설정되지 않았습니다. | 
| AD FS SSL 인증서가 자체 서명되었습니다. | 현재 AD FS 팜에서 자체 서명된 인증서를 SSL 인증서로 사용하고 있습니다. 이로 인해 Office 365에 대한 메일 클라이언트 인증이 실패합니다. | <p> 각 AD FS 서버에서 SSL 인증서를 업데이트합니다. </p> <ol><li>다음 요구 사항에 따라 공개적으로 신뢰할 수 있는 SSL 인증서를 가져옵니다. </li><li>인증서 설치 파일에는 개인 키가 포함되어 있습니다. </li> <li>확장된 키 사용은 적어도 서버 인증입니다. </li> <li>인증서 주체 또는 SAN(주체 대체 이름)에는 페더레이션 서비스의 DNS 이름이나 적절한 와일드카드가 포함됩니다. 예: sso.contoso.com 또는 *.contoso.com </li></ol> <p>로컬 컴퓨터 인증서 저장소의 각 서버에 새 SSL 인증서를 설치합니다. </p> <ol>AD FS 서비스 계정에 인증서의 개인 키에 대한 읽기 권한이 있는지 확인합니다. <br /> <b>Windows Server 2008 R2에 있는 AD FS 2.0의 경우:</b> <li>새 SSL 인증서를 페더레이션 서비스를 호스팅하는 IIS의 웹 사이트에 바인딩합니다. 각 페더레이션 서버 및 페더레이션 서버 프록시에서 이 단계를 수행해야 합니다. </li> <br /><b>Windows Server 2012 R2 이상 버전에 있는 AD FS의 경우:</b> <li>  <a href="https://docs.microsoft.com/windows-server/identity/ad-fs/operations/manage-ssl-certificates-ad-fs-wap">AD FS 및 WAP에서 SSL 인증서 관리</a> 참조 </li> </ol> | 
| 프록시 서버와 페더레이션 서버 간의 신뢰가 잘못되었습니다. | 페더레이션 서버 프록시와 페더레이션 서비스 간의 신뢰를 설정하거나 업데이트할 수 없습니다. | 프록시 서버에서 프록시 신뢰 인증서를 업데이트합니다. 프록시 구성 마법사를 다시 실행합니다. |
| ADFS에 대한 엑스트라넷 잠금 보호 사용 안 함 | AD FS 팜에 엑스트라넷 잠금 보호 기능을 사용하지 않도록 설정되어 있습니다. 이 기능은 AD DS 계정 잠금 정책이 적용된 경우 무차별 암호 대입 공격으로부터 사용자를 보호하고 사용자에 대한 서비스 거부 공격을 방지합니다. 이 기능을 사용하도록 설정한 경우 사용자에 대한 엑스트라넷 로그인 시도(WAP 서버 및 AD FS를 통한 로그인 시도) 실패 횟수가 'ExtranetLockoutThreshold'를 초과하면 AD FS 서버에서 'ExtranetObservationWindow'에 대한 추가적인 로그인 시도 처리를 중지합니다. AD FS 서버에서 이 기능을 사용하도록 설정하는 것이 좋습니다. | 다음 명령을 실행하여 AD FS 엑스트라넷 잠금 보호를 기본값으로 사용하도록 설정합니다.<br><i>Set-AdfsProperties -EnableExtranetLockout $true</i><br><br>사용자에 대해 구성한 AD 잠금 정책이 있는 경우 <i>'ExtranetLockoutThreshold'</i> 속성이 AD DS 잠금 임계값보다 낮은 값으로 설정되어 있는지 확인합니다. 이렇게 하면 AD FS에 대한 임계값을 초과한 요청은 삭제되고 AD DS 서버에 대한 유효성이 검사되지 않습니다. | 
| AD FS 서비스 계정의 SPN(서비스 사용자 이름)이 잘못되었습니다. | 페더레이션 서비스 계정의 서비스 사용자 이름이 등록되어 있지 않거나 고유하지 않습니다. 이로 인해 도메인에 가입된 클라이언트의 Windows 통합 인증이 원활하지 않을 수 있습니다. | [<b>SETSPN -L ServiceAccountName</b>]을 사용하여 서비스 사용자를 나열합니다.<br>[<b>SETSPN -X</b>]를 사용하여 중복된 서비스 사용자 이름을 확인합니다.</p><p>SPN이 AD FS 서비스 계정에 대해 중복된 경우 [<b>SETSPN -d service/namehostname</b>]을 사용하여 중복된 계정에서 해당 SPN을 제거합니다.</p><p>SPN이 설정되지 않은 경우 [<b>SETSPN -s {Desired-SPN} {domain_name}\{service_account}</b>]를 사용하여 페더레이션 서비스 계정에 대해 원하는 SPN을 설정합니다. | 
| 기본 AD FS 토큰 암호 해독 인증서가 곧 만료됩니다. | 기본 AD FS 토큰 암호 해독 인증서에는 개인 키가 없습니다. AD FS는 신뢰할 수 있는 클레임 공급자의 토큰을 해독할 수 없습니다. AD FS는 암호화된 SSO 쿠키를 해독할 수 없습니다. 이로 인해 최종 사용자는 리소스에 액세스하도록 인증받을 수 없습니다. | 자동 인증서 롤오버를 사용하도록 설정하면 AD FS에서 토큰 암호 해독 인증서를 관리합니다.</p><p>인증서를 수동으로 관리하는 경우 아래 지침을 따르세요. <b>새 토큰 암호 해독 인증서 가져오기</b><ol type="a"><li>EKU(확장된 키 사용)에 "키 암호화"가 포함되어 있는지 확인합니다.</li><li>주체 또는 SAN(주체 대체 이름)에는 제한이 없습니다.</li><li>토큰 암호 해독 인증서의 유효성을 검사할 때, 페더레이션 서버 및 클레임 공급자 파트너에서 신뢰할 수 있는 루트 인증 기관에 연결할 수 있어야 합니다.</li></ol><b>클레임 공급자 파트너에서 새 토큰 암호 해독 인증서를 신뢰하는 방법 결정</b><ol type="a"><li>인증서를 업데이트한 후 페더레이션 메타데이터를 가져오도록 파트너에 요청합니다.</li><li>새 인증서(.cer 파일)의 공개 키를 파트너와 공유합니다. 클레임 공급자 파트너의 AD FS 서버에 있는 [관리 도구] 메뉴에서 [AD FS 관리]를 시작합니다. [트러스트 관계/신뢰 당사자 트러스트] 아래에서 사용자에 대해 만들어진 신뢰를 선택합니다. [속성/암호화] 아래에서 "찾아보기"를 클릭하여 새 토큰 암호 해독 인증서를 선택하고 [확인]을 클릭합니다.</li></ol><b>각 페더레이션 서버의 로컬 인증서 저장소에 인증서 설치</b><ul><li>각 서버에서 인증서 설치 파일에 인증서의 개인 키가 있는지 확인합니다.</li></ul><b>페더레이션 서비스 계정에 새 인증서의 개인 키에 대한 액세스 권한이 있는지 확인 및</b> <b>AD FS에 새 인증서 추가</b><ol type="a"><li>[관리 도구] 메뉴에서 [AD FS 관리]를 시작합니다.</li><li>[서비스]를 펼치고 [인증서]를 선택합니다.</li><li>[작업] 창에서 [토큰 암호 해독 인증서 추가]를 클릭합니다.</li><li>토큰 암호 해독에 유효한 인증서 목록이 표시됩니다. 새 인증서가 목록에 표시되지 않은 경우, 다시 돌아가서 개인 키가 연결된 로컬 컴퓨터 개인 저장소에 인증서가 있고, 인증서에 키 암호화가 확장된 키 사용으로 있는지 확인해야 합니다.</li><li>새 토큰 암호 해독 인증서를 선택하고 [확인]을 클릭합니다.</li></ol><b>새 토큰 암호 해독 인증서를 기본 인증서로 설정</b><ol type="a"><li>[AD FS 관리]에서 [인증서] 노드를 선택하면 [토큰 암호 해독] 아래에 나열된 두 개의 인증서(기존 및 새 인증서)가 표시됩니다.</li><li>새 토큰 암호 해독 인증서를 선택하고, 마우스 오른쪽 단추로 클릭한 다음, [기본 인증서로 설정]을 선택합니다.</li><li>롤오버를 위해 이전 인증서를 보조 인증서로 남겨 둡니다. 롤오버에 더 이상 필요하지 않거나 인증서가 만료되면 이전 인증서를 제거하도록 계획해야 합니다. </li></ol>  | 
| 기본 AD FS 토큰 서명 인증서가 곧 만료됩니다. | AD FS 토큰 서명 인증서가 90일 이내에 만료됩니다. 이 인증서가 유효하지 않은 경우 AD FS에서 서명된 토큰을 발급할 수 없습니다. | <b>새 토큰 서명 인증서 가져오기</b><ol type="a"><li>향상된 키 사용(EKU)에 "디지털 서명"이 포함되어 있는지 확인합니다. </li><li>주제 또는 SAN(주체 대체 이름)에는 제한이 없습니다. </li><li>토큰 서명 인증서의 유효성을 검사할 때, 페더레이션 서버, 리소스 파트너 페더레이션 서버 및 신뢰 당사자 응용 프로그램 서버에서 신뢰할 수 있는 루트 인증 기관에 연결할 수 있어야 합니다.</li></ol><b>각 페더레이션 서버의 로컬 인증서 저장소에 인증서 설치</b> <ul><li>각 서버에서 인증서 설치 파일에 인증서의 개인 키가 있는지 확인합니다.</li></ul></li><b>페더레이션 서비스 계정에 새 인증서의 개인 키에 대한 액세스 권한이 있는지 확인 및</b> <b>AD FS에 새 인증서 추가</b><ol type="a"><li>[관리 도구] 메뉴에서 [AD FS 관리]를 시작합니다.</li><li>[서비스]를 펼치고 [인증서]를 선택합니다.</li><li>[작업] 창에서 [토큰 서명 인증서 추가...]를 클릭합니다.</li><li>토큰 서명에 유효한 인증서 목록이 표시됩니다. 새 인증서가 목록에 표시되지 않은 경우, 다시 돌아가서 개인 키가 연결된 로컬 컴퓨터 개인 저장소에 인증서가 있고, 인증서에 디지털 서명 KU가 있는지 확인해야 합니다.</li><li>새 토큰 서명 인증서를 선택하고 [확인]을 클릭합니다.</li></ol><b>토큰 서명 인증서의 변경에 대해 모든 신뢰 당사자에게 알림</b><ol type="a"><li>AD FS 페더레이션 메타데이터를 사용하는 신뢰 당사자가 새 인증서를 사용하여 시작하려면 새 페더레이션 메타데이터를 가져와야 합니다.</li><li>AD FS 페더레이션 메타데이터를 사용하지 않는 신뢰 당사자는 새 토큰 서명 인증서의 공개 키를 수동으로 업데이트해야 합니다. .cer 파일을 신뢰 당사자와 공유합니다.</li></a><b>새 토큰 서명 인증서를 기본 인증서로 설정</b><ol type="a"><li>[AD FS 관리]에서 [인증서] 노드를 선택하면 [토큰 서명] 아래에 나열된 두 개의 인증서(기존 및 새 인증서)가 표시됩니다.</li><li>새 토큰 서명 인증서를 선택하고, 마우스 오른쪽 단추로 클릭한 다음, <b>기본 인증서로 설정</b>을 선택합니다.</li><li>롤오버를 위해 이전 인증서를 보조 인증서로 남겨 둡니다. 롤오버에 더 이상 필요하지 않거나 인증서가 만료되면 이전 인증서를 제거하도록 계획해야 합니다. 현재 사용자의 SSO 세션은 서명되어 있습니다. 현재 AD FS 프록시 트러스트 관계는 이전 인증서를 사용하여 서명되고 암호화된 토큰을 활용합니다. </li></ol>  | 
| AD FS SSL 인증서를 로컬 인증서 저장소에서 찾을 수 없습니다. | AD FS 데이터베이스에서 SSL 인증서로 구성된 지문이 있는 인증서를 로컬 인증서 저장소에서 찾을 수 없습니다. 이로 인해 SSL을 통한 인증 요청이 실패합니다. 예를 들어 Office 365에 대한 메일 클라이언트 인증이 실패합니다. | 지문이 구성된 인증서를 로컬 인증서 저장소에 설치합니다. | 
| SSL 인증서가 만료되었습니다. | AD FS 서비스에 대한 SSL 인증서가 만료되었습니다. 이로 인해 유효한 SSL 연결을 요구하는 모든 인증 요청이 실패합니다. 예를 들어 메일 클라이언트 인증은 Office 365에 대해 인증할 수 없습니다. | 각 AD FS 서버에서 SSL 인증서를 업데이트합니다.<ol><li>다음 요구 사항에 따라 SSL 인증서를 가져옵니다.<li>확장된 키 사용은 적어도 서버 인증입니다. </li><li>인증서 주체 또는 SAN(주체 대체 이름)에는 페더레이션 서비스의 DNS 이름이나 적절한 와일드카드가 포함됩니다. 예: sso.contoso.com 또는 *.contoso.com</li></li><li>로컬 컴퓨터 인증서 저장소의 각 서버에 새 SSL 인증서를 설치합니다.</li><li>AD FS 서비스 계정에 인증서의 개인 키에 대한 읽기 권한이 있는지 확인합니다.</li></ol></p><p><b>Windows Server 2008 R2에 있는 AD FS 2.0의 경우:</b><ul><li>새 SSL 인증서를 페더레이션 서비스를 호스팅하는 IIS의 웹 사이트에 바인딩합니다. 각 페더레이션 서버 및 페더레이션 서버 프록시에서 이 단계를 수행해야 합니다.</li></ul></p><p><b>Windows Server 2012 R2 이상 버전에 있는 AD FS의 경우:</b> <a href="https://docs.microsoft.com/windows-server/identity/ad-fs/operations/manage-ssl-certificates-ad-fs-wap">AD FS 및 WAP에서 SSL 인증서 관리</a> 참조 </li> | 
| Azure Active Directory(Office 365)에 필요한 엔드포인트를 사용할 수 없습니다. | Exchange Online Services, Azure AD 및 Office 365에 필요하지만 사용하도록 설정할 수 없는 일단의 페더레이션 서비스에 대한 엔드포인트는 다음과 같습니다. <li>/adfs/services/trust/2005/usernamemixed</li><li>/adfs/services/trust/2005/windowstransport</li><li>/adfs/ls/</li> |  페더레이션 서비스에서 Microsoft Cloud Services에 필요한 엔드포인트를 사용하도록 설정합니다.<br>Windows Server 2012 R2 이상 버전에 있는 AD FS의 경우 <li> <a href=\"https://docs.microsoft.com/windows-server/identity/ad-fs/operations/manage-ssl-certificates-ad-fs-wap\">AD FS 및 WAP에서 SSL 인증서 관리</a> 참조 </li></p> | 
| 페더레이션 서버에서 AD FS 구성 데이터베이스에 연결할 수 없습니다. | AD FS 구성 데이터베이스에 연결하는 동안 AD FS 서비스 계정에 문제가 발생합니다. 이로 인해 이 컴퓨터의 AD FS 서비스가 예상대로 작동하지 않을 수 있습니다. | <li> AD FS 서비스 계정에 구성 데이터베이스에 대한 액세스 권한이 있는지 확인합니다. </li><li>AD FS 구성 데이터베이스 서비스를 사용할 수 있고 연결할 수 있는지 확인합니다. </li> | 
| 필수 SSL 바인딩이 누락되었거나 구성되지 않았습니다. | 이 페더레이션 서버에서 인증을 성공적으로 수행하는 데 필요한 SSL 바인딩이 잘못 구성되었습니다. 이로 인해 AD FS에서 들어오는 요청을 처리할 수 없습니다. | Windows Server 2012 R2의 경우</b><br>관리자 권한으로 명령 프롬프트를 열고 다음 명령을 실행합니다. <ol> <li> 현재 SSL 바인딩을 보려면: <i>Get-AdfsSslCertificate</i> <li> 새 바인딩을 추가하려면: <i>netsh http add sslcert hostnameport=<federation service name>:443 certhash=0102030405060708090A0B0C0D0E0F1011121314 appid={00112233-4455-6677-8899-AABBCCDDEEFF} certstorename=MY</i> |
| 기본 AD FS 토큰 서명 인증서가 만료되었습니다. | AD FS 토큰 서명 인증서가 만료되었습니다. 이 인증서가 유효하지 않은 경우 AD FS에서 서명된 토큰을 발급할 수 없습니다. | 자동 인증서 롤오버를 사용하도록 설정하면 AD FS에서 토큰 서명 인증서 업데이트를 관리합니다.</p><p>인증서를 수동으로 관리하는 경우 아래 지침을 따르세요. <ol><li><b>새 토큰 서명 인증서 가져오기</b><ol type="a"><li>향상된 키 사용(EKU)에 "디지털 서명"이 포함되어 있는지 확인합니다. </li><li>주제 또는 SAN(주체 대체 이름)에는 제한이 없습니다. </li><li>토큰 서명 인증서의 유효성을 검사할 때, 페더레이션 서버, 리소스 파트너 페더레이션 서버 및 신뢰 당사자 응용 프로그램 서버에서 신뢰할 수 있는 루트 인증 기관에 연결할 수 있어야 합니다.</li></ol></li><li><b>각 페더레이션 서버의 로컬 인증서 저장소에 인증서 설치</b> <ul><li>각 서버에서 인증서 설치 파일에 인증서의 개인 키가 있는지 확인합니다.</li></ul></li><li><b>페더레이션 서비스 계정에 새 인증서의 개인 키에 대한 액세스 권한이 있는지 확인</b></li><li><b>AD FS에 새 인증서 추가</b><ol type="a"><li>[관리 도구] 메뉴에서 [AD FS 관리]를 시작합니다.</li><li>[서비스]를 펼치고 [인증서]를 선택합니다.</li><li>[작업] 창에서 [토큰 서명 인증서 추가...]를 클릭합니다.</li><li>토큰 서명에 유효한 인증서 목록이 표시됩니다. 새 인증서가 목록에 표시되지 않은 경우, 다시 돌아가서 개인 키가 연결된 로컬 컴퓨터 개인 저장소에 인증서가 있고, 인증서에 디지털 서명 KU가 있는지 확인해야 합니다.</li><li>새 토큰 서명 인증서를 선택하고 [확인]을 클릭합니다.</li></ol></li><li><b>토큰 서명 인증서의 변경에 대해 모든 신뢰 당사자에게 알림</b><ol type="a"><li>AD FS 페더레이션 메타데이터를 사용하는 신뢰 당사자가 새 인증서를 사용하여 시작하려면 새 페더레이션 메타데이터를 가져와야 합니다.</li><li>AD FS 페더레이션 메타데이터를 사용하지 않는 신뢰 당사자는 새 토큰 서명 인증서의 공개 키를 수동으로 업데이트해야 합니다. .cer 파일을 신뢰 당사자와 공유합니다.</li></ol></li><li><b>새 토큰 서명 인증서를 기본 인증서로 설정</b><ol type="a"><li>[AD FS 관리]에서 [인증서] 노드를 선택하면 [토큰 서명] 아래에 나열된 두 개의 인증서(기존 및 새 인증서)가 표시됩니다.</li><li>새 토큰 서명 인증서를 선택하고, 마우스 오른쪽 단추로 클릭한 다음, <b>기본 인증서로 설정</b>을 선택합니다.</li><li>롤오버를 위해 이전 인증서를 보조 인증서로 남겨 둡니다. 롤오버에 더 이상 필요하지 않거나 인증서가 만료되면 이전 인증서를 제거하도록 계획해야 합니다. 현재 사용자의 SSO 세션은 서명되어 있습니다. 현재 AD FS 프록시 트러스트 관계는 이전 인증서를 사용하여 서명되고 암호화된 토큰을 활용합니다. </li></ol></li>|
| 프록시 서버에서 정체 제어 요청을 삭제하고 있습니다. | 이 프록시 서버는 현재 이 프록시 서버와 페더레이션 서버 간의 일반적인 대기 시간보다 길기 때문에 엑스트라넷의 요청을 삭제하고 있습니다. 이로 인해 AD FS 프록시 서버에서 처리한 인증 요청의 특정 부분이 실패할 수 있습니다. | <li>페더레이션 프록시 서버와 페더레이션 서버 간의 네트워크 대기 시간이 허용되는 범위 내에 속하는지 확인합니다. "토큰 요청 대기 시간"의 추세 값은 모니터링 섹션을 참조하세요. [1,500ms]보다 큰 대기 시간은 긴 대기 시간으로 간주되어야 합니다. 대기 시간이 길면 AD FS 및 AD FS 프록시 서버 간의 네트워크에 연결 문제가 없는지 확인합니다.</li><li>페더레이션 서버가 인증 요청으로 오버로드되지 않는지 확인합니다. 모니터링 섹션에서는 초당 토큰 요청 수, CPU 사용률 및 메모리 사용량에 대한 추세 보기를 제공합니다.</li><li>위의 항목이 확인되었고 이 문제가 계속 표시되면, 관련 링크의 지침에 따라 각 페더레이션 프록시 서버에서 정체 방지 설정을 조정합니다. | 
| AD FS 서비스 계정에서 인증서의 개인 키 중 하나에 대한 액세스가 거부되었습니다. | AD FS 서비스 계정에 이 컴퓨터의 AD FS 인증서 중 하나의 개인 키에 대한 액세스 권한이 없습니다. | AD FS 서비스 계정에 로컬 컴퓨터 인증서 저장소에 저장된 SSL, 토큰 서명 인증서 및 토큰 암호 해독 인증서에 대한 액세스가 제공되는지 확인합니다.<ol> <li> 명령줄에서 MMC를 입력합니다.</li><li>[파일] -> [스냅인 추가/제거]로 차례로 이동합니다.</li><li> [인증서]를 선택하고 [추가]를 클릭합니다. -> [컴퓨터 계정]을 선택하고 [다음]을 클릭합니다. -> [로컬 컴퓨터]를 선택하고 [마침]을 클릭합니다. 확인을 클릭합니다. </li></ol> <br>Certificates(로컬 컴퓨터)/Personal/Certificates를 엽니다. AD FS에서 사용하는 모든 인증서에 대해 다음을 수행합니다.<ol><li>인증서를 마우스 오른쪽 단추로 클릭합니다.</li><li>[모든 작업] -> [개인 키 관리]를 차례로 선택합니다.</li><li>[그룹 또는 사용자 이름] 아래의 [보안] 탭에서 adfs 서비스 계정이 있는지 확인합니다. 그렇지 않은 경우 [추가]를 선택하고 AD FS 서비스 계정을 추가합니다.</li><li>AD FS 서비스 계정을 선택하고 "<AD FS Service Account Name>에 대한 권한" 아래에서 [읽기] 권한이 허용되어 있는지(확인 표시) 확인합니다. | 
| AD FS SSL 인증서에 개인 키가 없습니다. | AD FS SSL 인증서가 개인 키 없이 설치되었습니다. 이로 인해 SSL을 통한 인증 요청이 실패합니다. 예를 들어 Office 365에 대한 메일 클라이언트 인증이 실패합니다. | 각 AD FS 서버에서 SSL 인증서를 업데이트합니다.<ol><li>다음 요구 사항에 따라 공개적으로 신뢰할 수 있는 SSL 인증서를 가져옵니다.<ol type="a"><li>인증서 설치 파일에는 개인 키가 포함되어 있습니다.</li><li>확장된 키 사용은 적어도 서버 인증입니다. </li><li>인증서 주체 또는 SAN(주체 대체 이름)에는 페더레이션 서비스의 DNS 이름이나 적절한 와일드카드가 포함됩니다. 예: sso.contoso.com 또는 *.contoso.com</li></ol></li><li>로컬 컴퓨터 인증서 저장소의 각 서버에 새 SSL 인증서를 설치합니다.</li><li>AD FS 서비스 계정에 인증서의 개인 키에 대한 읽기 권한이 있는지 확인합니다.</li></ol></p><p><b>Windows Server 2008 R2에 있는 AD FS 2.0의 경우:</b><ul><li>새 SSL 인증서를 페더레이션 서비스를 호스팅하는 IIS의 웹 사이트에 바인딩합니다. 각 페더레이션 서버 및 페더레이션 서버 프록시에서 이 단계를 수행해야 합니다.</li></ul></p><p><b>Windows Server 2012 R2 이상 버전에 있는 AD FS의 경우:</b> <li> <a href="https://docs.microsoft.com/windows-server/identity/ad-fs/operations/manage-ssl-certificates-ad-fs-wap">AD FS 및 WAP에서 SSL 인증서 관리</a> 참조 </li> | 
| 기본 AD FS 토큰 암호 해독 인증서가 만료되었습니다. | 기본 AD FS 토큰 암호 해독 인증서가 만료되었습니다. AD FS는 신뢰할 수 있는 클레임 공급자의 토큰을 해독할 수 없습니다. AD FS는 암호화된 SSO 쿠키를 해독할 수 없습니다. 이로 인해 최종 사용자는 리소스에 액세스하도록 인증받을 수 없습니다. | <p>자동 인증서 롤오버를 사용하도록 설정하면 AD FS에서 토큰 암호 해독 인증서를 관리합니다.</p><p>인증서를 수동으로 관리하는 경우 아래 지침을 따르세요.<ol><li><b>새 토큰 암호 해독 인증서 가져오기</b><ul><li>EKU(확장된 키 사용)에 "키 암호화"가 포함되어 있는지 확인합니다.</li><li>주체 또는 SAN(주체 대체 이름)에는 제한이 없습니다.</li><li>토큰 암호 해독 인증서의 유효성을 검사할 때, 페더레이션 서버 및 클레임 공급자 파트너에서 신뢰할 수 있는 루트 인증 기관에 연결할 수 있어야 합니다.</li></ul></li><li><b>클레임 공급자 파트너에서 새 토큰 암호 해독 인증서를 신뢰하는 방법 결정</b><ul><li>인증서를 업데이트한 후 페더레이션 메타데이터를 가져오도록 파트너에 요청합니다.</li><li>새 인증서(.cer 파일)의 공개 키를 파트너와 공유합니다. 클레임 공급자 파트너의 AD FS 서버에 있는 [관리 도구] 메뉴에서 [AD FS 관리]를 시작합니다. [트러스트 관계/신뢰 당사자 트러스트] 아래에서 사용자에 대해 만들어진 신뢰를 선택합니다. [속성/암호화] 아래에서 "찾아보기"를 클릭하여 새 토큰 암호 해독 인증서를 선택하고 [확인]을 클릭합니다.</li></ul></li><li><b>각 페더레이션 서버의 로컬 인증서 저장소에 인증서 설치</b><ul><li>각 서버에서 인증서 설치 파일에 인증서의 개인 키가 있는지 확인합니다.</li></ul></li><li><b>페더레이션 서비스 계정에 새 인증서의 개인 키에 대한 액세스 권한이 있는지 확인</b></li><li><b>AD FS에 새 인증서 추가</b><ul><li>[관리 도구] 메뉴에서 [AD FS 관리]를 시작합니다.</li><li>[서비스]를 펼치고 [인증서]를 선택합니다.</li><li>[작업] 창에서 [토큰 암호 해독 인증서 추가]를 클릭합니다.</li><li>토큰 암호 해독에 유효한 인증서 목록이 표시됩니다. 새 인증서가 목록에 표시되지 않은 경우, 다시 돌아가서 개인 키가 연결된 로컬 컴퓨터 개인 저장소에 인증서가 있고, 인증서에 키 암호화가 확장된 키 사용으로 있는지 확인해야 합니다.</li><li>새 토큰 암호 해독 인증서를 선택하고 [확인]을 클릭합니다.</li></ul></li><li><b>새 토큰 암호 해독 인증서를 기본 인증서로 설정</b><ul><li>[AD FS 관리]에서 [인증서] 노드를 선택하면 [토큰 암호 해독] 아래에 나열된 두 개의 인증서(기존 및 새 인증서)가 표시됩니다.</li><li>새 토큰 암호 해독 인증서를 선택하고, 마우스 오른쪽 단추로 클릭한 다음, [기본 인증서로 설정]을 선택합니다.</li><li>롤오버를 위해 이전 인증서를 보조 인증서로 남겨 둡니다. 롤오버에 더 이상 필요하지 않거나 인증서가 만료되면 이전 인증서를 제거하도록 계획해야 합니다. </li></ul></li> | 

## <a name="alerts-for-active-directory-domain-services"></a>Active Directory Domain Services에 대한 경고

| 경고 이름 | 설명 | 재구성 |
| --- | --- | ----- |
| LDAP ping을 통해 도메인 컨트롤러에 연결할 수 없습니다. | LDAP ping을 통해 도메인 컨트롤러에 연결할 수 없습니다. 네트워크 문제 또는 컴퓨터 문제로 인해 발생할 수 있습니다. 이에 따라 LDAP ping이 실패합니다. |  <li>'도메인 컨트롤러를 보급하고 있지 않습니다'와 같은 관련 경고에 대한 경고 목록을 검사합니다. </li><li>영향을 받는 도메인 컨트롤러에 충분한 디스크 공간이 있는지 확인합니다. 공간이 부족하면 DC에서 자체를 LDAP 서버로 보급하는 것을 중지합니다. </li><li> PDC를 찾습니다. 이렇게 하려면 <br> 영향을 받는 도메인 컨트롤러에서 <i>netdom query fsmo</i>를 </br> 실행합니다. <li> 실제 네트워크가 제대로 구성/연결되었는지 확인합니다. </li> |
| Active Directory 복제 오류가 발생했습니다. | 이 도메인 컨트롤러에 복제 문제가 발생했으며, 이는 복제 상태 대시보드에서 확인할 수 있습니다. 잘못된 구성이나 기타 관련된 문제로 인해 복제 오류가 발생했을 수도 있습니다. 처리되지 않은 복제 오류로 인해 데이터 불일치가 발생할 수 있습니다. | 영향을 받는 원본 및 대상 DC의 이름에 대한 자세한 내용을 참조합니다. 복제 상태 대시보드로 이동하고 영향을 받는 DC의 활성 오류를 찾습니다. 오류를 클릭하여 해당 특정 오류를 수정하는 방법에 대한 자세한 내용이 포함된 블레이드를 엽니다.| 
| 도메인 컨트롤러에서 PDC를 찾을 수 없습니다. | PDC는 이 도메인 컨트롤러를 통해 연결할 수 없습니다. 이로 인해 영향을 받는 사용자 로그온, 적용되지 않은 그룹 정책 변경 및 시스템 시간 동기화 오류가 발생합니다. | <li>'도메인 컨트롤러를 보급하고 있지 않습니다'와 같이 PDC에 영향을 줄 수 있는 관련 경고에 대한 경고 목록을 검사합니다. </li> <li>PDC를 찾습니다. 이렇게 하려면 <br> 영향을 받는 도메인 컨트롤러에서 <i>netdom query fsmo</i>를 </br> 실행합니다.<li>네트워크가 제대로 작동하고 있는지 확인합니다. </li> |
| 도메인 컨트롤러에서 글로벌 카탈로그 서버를 찾을 수 없습니다. | 글로벌 카탈로그 서버는 이 도메인 컨트롤러에서 연결할 수 없습니다. 이로 인해 이 도메인 컨트롤러를 통한 인증이 실패합니다. | 영향을 받는 서버가 GC일 수 있는 <b>도메인 컨트롤러를 보급하고 있지 않습니다</b> 경고에 대한 경고 목록을 검사합니다. 보급 경고가 없으면 GC에 대한 SRV 레코드를 확인합니다. 다음을 실행하여 확인할 수 있습니다. <br> <i>nltest \/dnsgetdc: [ForestName] \/gc</i> </br> GC로 보급되는 DC를 나열해야 합니다. 목록이 비어 있으면 DNS 구성을 확인하여 GC에서 SRV 레코드를 등록했는지 확인합니다. DC는 DNS에서 이러한 레코드를 찾을 수 있습니다. <br />글로벌 카탈로그 문제를 해결하려면 <a href="https://technet.microsoft.com/library/cc961811.aspx#ECAA">글로벌 카탈로그 서버로 보급</a>을 참조하세요. | 
| 도메인 컨트롤러에서 로컬 SYSVOL 공유에 연결할 수 없습니다. | Sysvol에는 도메인의 DC 내에서 배포할 그룹 정책 개체 및 스크립트의 중요한 요소가 포함되어 있습니다. DC는 자체를 DC로 보급하지 않으며, 그룹 정책이 적용되지 않습니다. | <a href="https://support.microsoft.com/kb/2958414">누락된 SYSVOL 및 Netlogon 공유 문제를 해결하는 방법</a> 참조 | 
| 도메인 컨트롤러 시간이 동기화되지 않았습니다. | 이 도메인 컨트롤러의 시간이 정상적인 시간차 범위를 벗어났습니다. 이로 인해 Kerberos 인증이 실패합니다. | <li>Windows 시간 서비스를 다시 시작합니다. <br>이렇게 하려면 영향을 받는 도메인 컨트롤러에서 <i>net stop w32time</i>, </br> 다음으로 <br><i>net start w32time</i>을</br> 실행합니다.</li><li>시간을 다시 동기화합니다. <br>이렇게 하려면 영향을 받는 도메인 컨트롤러에서 <i>w32tm \/resync</i>를</br> 실행합니다. | 
| 도메인 컨트롤러를 보급하고 있지 않습니다. | 이 도메인 컨트롤러는 수행할 수 있는 역할을 제대로 보급하고 있지 않습니다. 복제 또는 DNS 구성 오류가 있거나, 중요한 서비스가 실행되지 않거나, 서버가 완전히 초기화되지는 않았기 때문일 수 있습니다.  이로 인해 도메인 컨트롤러, 도메인 멤버 및 기타 장치에서 이 도메인 컨트롤러를 찾을 수 없습니다. 또한 다른 도메인 컨트롤러가 이 도메인 컨트롤러에서 복제하지 못할 수도 있습니다. | '복제가 중단되었습니다'와 같은 다른 관련 경고에 대한 경고 목록을 검사합니다. 도메인 컨트롤러 시간이 동기화되지 않았습니다. Netlogon 서비스가 실행되고 있지 않습니다. DFSR 및/또는 NTFRS 서비스가 실행되고 있지 않습니다. 관련 DNS 문제를 확인하고 해결합니다. 이렇게 하려면 영향을 받는 도메인 컨트롤러에 로그온합니다. [시스템 이벤트 로그]를 엽니다. 5774, 5775 또는 5781 이벤트가 있는 경우 <a href="https://msdn.microsoft.com/library/bb727055.aspx#ECAA">도메인 컨트롤러 로케이터의 DNS 레코드 등록 오류 문제 해결</a>을 참조하세요. Windows 시간 서비스 관련 문제를 확인하고 해결합니다. 이렇게 하려면 Windows 시간 서비스가 영향을 받는 도메인 컨트롤러에서 '<b>net start w32time</b>'을 실행하고 있는지 확인합니다. Windows 시간 서비스를 다시 시작합니다. 영향을 받는 도메인 컨트롤러에서 '<b>net stop w32time</b>', 다음으로 '<b>net start w32time</b>'을 실행합니다. | 
| GPSVC 서비스가 실행되고 있지 않습니다. | 서비스가 중지되거나 사용하지 않도록 설정된 경우, 관리자가 구성한 설정이 적용되지 않으며 그룹 정책을 통해 응용 프로그램 및 구성 요소를 관리할 수 없습니다. 서비스를 사용하지 않도록 설정된 경우 그룹 정책 구성 요소에 종속된 모든 구성 요소 또는 응용 프로그램이 작동하지 않을 수 있습니다.  | 실행 <br>영향을 받는 도메인 컨트롤러에서 <i>net start gpsvc</i>를</br> 실행합니다. | 
| DFSR 및/또는 NTFRS 서비스가 실행되고 있지 않습니다. | DFSR 및 NTFRS 서비스가 둘 다 중지되면 도메인 컨트롤러에서 SYSVOL 데이터를 복제할 수 없습니다. SYSVOL 데이터는 불일치 상태가 됩니다. | <li>DFSR을 사용하는 경우<ol type="1" > 영향을 받는 도메인 컨트롤러에서 '<b>net start dfsr</b>'을 실행합니다. </li><li>NTFRS를 사용하는 경우<ol type="1" >영향을 받는 도메인 컨트롤러에서 '<b>net start ntfrs</b>'를 실행합니다. </li>| 
| Netlogon 서비스가 실행되고 있지 않습니다. | 이 DC에서 도메인 컨트롤러의 로그온 요청, 등록, 인증 및 찾기를 사용할 수 없습니다. | 영향을 받는 도메인 컨트롤러에서 '<b>net start netlogon</b>'을 실행합니다. | 
| W32Time 서비스가 실행되고 있지 않습니다. | Windows 시간 서비스가 중지되면 날짜 및 시간 동기화를 사용할 수 없습니다. 이 서비스를 사용하지 않도록 설정하면 이 서비스에 명시적으로 종속된 모든 서비스가 시작되지 않습니다. | 영향을 받는 도메인 컨트롤러에서 '<b>net start win32Time</b>'을 실행합니다. | 
| ADWS 서비스가 실행되고 있지 않습니다. | Active Directory 웹 서비스가 중지되거나 사용하지 않도록 설정된 경우, Active Directory PowerShell과 같은 클라이언트 응용 프로그램은 이 서버에서 로컬로 실행되는 모든 디렉터리 서비스 인스턴스에 액세스하거나 이를 관리할 수 없습니다. | 영향을 받는 도메인 컨트롤러에서 '<b>net start adws</b>'를 실행합니다. | 
| 루트 PDC가 NTP 서버에서 동기화되지 않습니다. | 외부 또는 내부 시간 원본에서 시간을 동기화하도록 PDC를 구성하지 않는 경우, PDC 에뮬레이터가 내부 클록을 사용하고 자체적으로 포리스트에 대한 신뢰할 수 있는 시간 원본이 됩니다. PDC 자체의 시간이 정확하지 않으면 모든 컴퓨터의 시간이 잘못 설정됩니다. | 영향을 받는 도메인 컨트롤러에서 명령 프롬프트를 엽니다. net stop w32time을 실행하여 시간 서비스를 중지합니다.</li> <li>다음을 실행하여 외부 시간 원본을 구성합니다. <br> <i>w32tm \/config \/manualpeerlist: time.windows.com \/syncfromflags:manual \/reliable:yes</i></br><br>참고: time.windows.com을 원하는 외부 시간 원본의 주소로 바꿉니다. Time 서비스 시작: <br> <i>net start w32time</i>을</br> | 
| 도메인 컨트롤러가 격리되었습니다. | 이 도메인 컨트롤러는 작동 중인 다른 도메인 컨트롤러에 연결되지 않았습니다. 이 문제는 부적절한 구성으로 인해 발생할 수 있습니다. 이에 따라 이 DC는 사용되지 않으며 어떤 사용자에게도 복제되지 않습니다. | 인바운드 및 아웃바운드 복제를 사용하도록 설정합니다. 이렇게 하려면 영향을 받는 도메인 컨트롤러에서 '<b>repadmin /options ServerName -DISABLE_INBOUND_REPL</b>' 및 '<b>repadmin /options ServerName -DISABLE_OUTBOUND_REPL</b>'을 실행합니다. 다른 도메인 컨트롤러에 새 복제 연결을 만듭니다.<ol type="1"><li>Active Directory 사이트 및 서비스를 엽니다. 이렇게 하려면 [시작] 메뉴에서 [관리 도구]를 가리킨 다음, [Active Directory 사이트 및 서비스]를 클릭합니다. </li><li>콘솔 트리에서 [사이트]를 펼친 다음, 이 DC가 속한 사이트를 펼칩니다. </li><li>[서버] 컨테이너를 확장하여 서버 목록을 표시합니다. </li><li>이 DC에 대한 서버 개체를 펼칩니다. </li><li>NTDS 설정 개체를 마우스 오른쪽 단추로 클릭하고, [새 Active Directory Domain Services 연결...]을 클릭합니다. </li><li>목록에서 [서버]를 선택하고 [확인]을 클릭합니다.</li></ol><a href="https://support.microsoft.com/kb/230306 ">Active Directory에서 분리된 도메인을 제거하는 방법</a> |
| 아웃바운드 복제를 사용할 수 없습니다. | 사용할 수 없는 아웃바운드 복제가 있는 DC는 자체 내에서 시작된 변경을 배포할 수 없습니다. | 영향을 받는 도메인 컨트롤러에서 아웃바운드 복제를 사용하도록 설정하려면 다음 단계를 수행합니다. [시작], [실행]을 차례로 클릭하고, cmd를 입력한 다음, [확인]을 클릭합니다. 다음 텍스트를 입력한 다음, Enter 키를 누릅니다.<br><i>repadmin /options -DISABLE_OUTBOUND_REPL</i> | 
| 인바운드 복제를 사용할 수 없습니다. | 사용할 수 없는 인바운드 복제가 있는 DC에는 최신 정보가 없습니다. 이로 인해 로그온 실패가 발생할 수 있습니다. | 영향을 받는 도메인 컨트롤러에서 인바운드 복제를 사용하도록 설정하려면 다음 단계를 수행합니다. [시작], [실행]을 차례로 클릭하고, cmd를 입력한 다음, [확인]을 클릭합니다. 다음 텍스트를 입력한 다음, Enter 키를 누릅니다.<br><i>repadmin /options -DISABLE_INBOUND_REPL</i> </br> | 
| LanmanServer 서비스가 실행되고 있지 않습니다. | 이 서비스를 사용하지 않도록 설정하면 이 서비스에 명시적으로 종속된 모든 서비스가 시작되지 않습니다. | 영향을 받는 도메인 컨트롤러에서 '<b>net start LanManServer</b>'를 실행합니다. |
| Kerberos 키 배포 센터 서비스가 실행되고 있지 않습니다. | KDC 서비스가 중지되면 사용자가 Kerberos v5 인증 프로토콜을 사용하여 이 DC를 통해 인증받을 수 없습니다. | 영향을 받는 도메인 컨트롤러에서 '<b>net start kdc</b>'를 실행합니다. |
| DNS 서비스가 실행되고 있지 않습니다. | DNS 서비스가 중지되면 DNS를 위해 해당 서버를 사용하는 컴퓨터 및 사용자가 리소스를 찾을 수 없습니다. | 영향을 받는 도메인 컨트롤러에서 '<b>net start dns</b>'를 실행합니다. |
| DC에 USN 롤백이 발생했습니다. | SN 롤백이 발생하면 이전에 USN을 확인한 대상 도메인 컨트롤러에서 개체 및 특성에 대한 수정 내용을 인바운드 복제하지 않습니다. 이러한 대상 도메인 컨트롤러는 자체적으로 최신 상태라고 판단하므로 디렉터리 서비스 이벤트 로그 또는 모니터링 및 진단 도구에서 복제 오류가 보고되지 않습니다. USN 롤백은 모든 파티션의 개체 또는 특성의 복제에 영향을 줄 수 있습니다. 가장 자주 관찰되는 부작용은 롤백 도메인 컨트롤러에서 만들어진 사용자 계정과 컴퓨터 계정이 하나 이상의 복제 파트너에 존재하지 않는다는 것입니다. 또는 롤백 도메인 컨트롤러에서 시작된 암호 업데이트가 복제 파트너에 존재하지 않습니다. | USN 롤백에서 복구하는 방법에는 두 가지가 있습니다. <p>다음 단계에 따라 도메인에서 도메인 컨트롤러를 제거합니다. <ol type="1"><li>도메인 컨트롤러에서 Active Directory를 제거하여 강제로 독립 실행형 서버로 만듭니다. 추가 정보는 다음 문서 번호를 클릭하여 Microsoft 기술 자료 문서를 살펴봅니다. <br><a href="https://support.microsoft.com/kb/332199">332199</a> Active Directory 설치 마법사를 사용하여 Windows Server 2003 및 Windows 2000 Server에서 수준 내리기를 강제로 적용할 때 정상적으로 강등되지 않는 도메인 컨트롤러 </li> <li>강등된 서버를 종료합니다.</li> <li>정상적인 도메인 컨트롤러에서 강등된 도메인 컨트롤러의 메타데이터를 정리합니다. 추가 정보는 다음 문서 번호를 클릭하여 Microsoft 기술 자료 문서를 살펴봅니다. <br><a href="https://support.microsoft.com/kb/216498">216498</a> 도메인 컨트롤러의 수준 내리기 실패 후 Active Directory에서 데이터를 제거하는 방법</li> <li>잘못 복원된 도메인 컨트롤러에서 작업 마스터 역할을 호스팅하는 경우 이러한 역할을 정상적인 도메인 컨트롤러로 전송합니다. 추가 정보는 다음 문서 번호를 클릭하여 Microsoft 기술 자료 문서를 살펴봅니다. <br><a href="https://support.microsoft.com/kb/255504">255504</a> Ntdsutil.exe를 사용하여 FSMO 역할을 획득하거나 도메인 컨트롤러로 전송</li> <li>강등된 서버를 다시 시작합니다.</li> <li>필요한 경우 독립 실행형 서버에 Active Directory를 다시 설치합니다.</li> <li>도메인 컨트롤러가 이전에 글로벌 카탈로그였으면 도메인 컨트롤러를 글로벌 카탈로그로 구성합니다. 추가 정보는 다음 문서 번호를 클릭하여 Microsoft 기술 자료 문서를 살펴봅니다. <br><a href="https://support.microsoft.com/kb/313994">313994</a> Windows 2000에서 글로벌 카탈로그를 만들거나 이동하는 방법</li> <li>도메인 컨트롤러에서 이전에 작업 마스터 역할을 호스팅한 경우 작업 마스터 역할을 도메인 컨트롤러로 다시 전송합니다. 추가 정보는 다음 문서 번호를 클릭하여 Microsoft 기술 자료 문서를 살펴봅니다. <br><a href="https://support.microsoft.com/kb/255504">255504</a> Ntdsutil.exe를 사용하여 FSMO 역할을 획득하거나 도메인 컨트롤러로 전송 - 양호한 백업의 시스템 상태 복원</li></ol></p> <p>이 도메인 컨트롤러에 유효한 시스템 상태 백업이 있는지 여부를 평가합니다. 롤백된 도메인 컨트롤러가 잘못 복원되기 전에 유효한 시스템 상태 백업이 만들어지고 도메인 컨트롤러에서 최근에 변경된 내용이 백업에 포함되어 있으면, 최신 백업에서 시스템 상태를 복원합니다.</p> <p>또한 스냅숏을 백업 원본으로 사용할 수도 있습니다. 또는 <a href="http://technet.microsoft.com/library/dd363545(WS.10).aspx">이 문서</a>에 있는 "시스템 상태 데이터 백업 없이 이전 버전의 가상 도메인 컨트롤러 VHD 복원" 섹션의 절차를 사용하여 데이터베이스에 새 호출 ID를 부여하도록 설정할 수 있습니다.</p></p> |









## <a name="next-steps"></a>다음 단계
* [Azure AD Connect Health FAQ](active-directory-aadconnect-health-faq.md)
