---
title: Azure 표준 Load Balancer 및 가용성 영역 | Microsoft Docs
description: 표준 Load Balancer 및 가용성 영역
services: load-balancer
documentationcenter: na
author: KumudD
manager: jeconnoc
editor: ''
ms.assetid: ''
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/29/2018
ms.author: kumud
ms.openlocfilehash: f5d46fda6bdb32c1a5000883c6aedb2da15e796a
ms.sourcegitcommit: 20d103fb8658b29b48115782fe01f76239b240aa
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/03/2018
---
# <a name="standard-load-balancer-and-availability-zones"></a>표준 Load Balancer 및 가용성 영역

Azure Load Balancer의 표준 SKU는 [가용성 영역](../availability-zones/az-overview.md) 시나리오를 지원합니다. 표준 Load Balancer에서는 몇 가지 새로운 개념을 사용할 수 있습니다. 이를 통해 리소스를 영역에 맞게 조정하고 영역 간에 분산하여 종단 간 시나리오의 가용성을 최적화할 수 있습니다.  가용성 영역에 대한 설명, 현재 가용성 영역을 지원하는 지역 및 기타 관련 개념 및 제품에 대한 지침은 [가용성 영역](../availability-zones/az-overview.md)을 검토하세요. 표준 Load Balancer와 결합된 가용성 영역은 다양한 시나리오를 만들 수 있는 광범위하고 유연한 기능 집합입니다.  이러한 [개념](#concepts)과 기본 시나리오 [디자인 지침](#design)을 이해하려면 이 문서를 검토하세요.

>[!NOTE]
>다른 관련 항목은 [가용성 영역](https://aka.ms/availabilityzones)을 검토하세요. 

## <a name="concepts"></a> Load Balancer에 적용된 가용성 영역 개념

Load Balancer 리소스와 실제 인프라 사이에는 직접적인 관계가 없습니다. 따라서 Load Balancer를 만들어도 인스턴스가 만들어지지 않습니다. Load Balancer 리소스는 만들려는 시나리오를 달성하기 위해 Azure에서 미리 빌드된 다중 테넌트 인프라를 프로그래밍해야 하는 방법을 표현할 수 있는 개체입니다.  영역 중복 서비스가 고객 관점에서 하나의 리소스로 나타나지만 단일 Load Balancer 리소스가 여러 가용성 영역에서 인프라 프로그래밍을 제어할 수 있기 때문에 이는 가용성 영역의 컨텍스트에서 중요합니다.

Load Balancer 리소스의 함수는 프런트 엔드, 규칙, 상태 프로브 및 백 엔드 풀 정의로 표현됩니다.

가용성 영역의 컨텍스트에서 Load Balancer 리소스의 동작과 속성은 영역 중복 또는 영역으로 설명됩니다.  영역 중복 및 구역은 속성의 영역 조건(zonality)을 나타냅니다.  Load Balancer의 컨텍스트에서 영역 중복은 항상 *모든 영역*을 의미하고, 영역은 *단일 영역*에 대한 서비스를 보장합니다.

공용 및 내부 Load Balancer 모두는 영역 중복 시나리오 및 영역 시나리오를 지원하며, 필요에 따라 둘 다 영역을 통해 트래픽을 보낼 수 있습니다(*영역 간 부하 분산*).

Load Balancer 리소스 자체는 지역이며 영역이 될 수 없습니다.  그리고 VNet과 서브넷은 항상 지역이며 영역이 될 수 없습니다.

### <a name="frontend"></a>프런트 엔드

Load Balancer 프런트 엔드는 공용 IP 주소 리소스 또는 가상 네트워크 리소스의 서브넷에 속한 개인 IP 주소를 참조하는 프런트 엔드 IP 구성입니다.  서비스가 노출되는 부하 분산된 엔드포인트를 형성합니다.

Load Balancer 리소스는 영역 및 영역 중복 프런트 엔드 둘 다를 동시에 포함할 수 있습니다. 

영역에 대한 공용 IP 리소스가 보장되면 영역 조건(또는 이에 따른 결핍)은 변경할 수 없습니다.  공용 IP 프런트 엔드의 영역 조건을 변경하거나 생략하려면 해당 영역에서 공용 IP를 다시 만들어야 합니다.  

프런트 엔드를 제거하고 다시 만들거나, 영역 조건을 변경하거나 생략하여 내부 Load Balancer의 프런트 엔드에 대한 영역 조건을 변경할 수 있습니다.

여러 프런트 엔드를 사용하는 경우 중요한 고려 사항으로 [Load Balancer의 다중 프런트 엔드](load-balancer-multivip-overview.md)를 검토하세요.

#### <a name="zone-redundant-by-default"></a>기본으로서의 중복 영역

가용성 영역이 있는 지역에서 표준 Load Balancer 프런트 엔드는 기본적으로 영역 중복입니다.  단일 프런트 엔드 IP 주소는 영역 오류에서 존속할 수 있으며, 영역에 관계없이 모든 백 엔드 풀 멤버에 연결하는 데 사용할 수 있습니다. 이 경우 비충돌 데이터 경로를 의미하지는 않지만 재시도 또는 재설정은 성공합니다. DNS 중복 구성표는 필요하지 않습니다. 프런트 엔드의 단일 IP 주소는 모든 가용성 영역에서 독립적인 인프라 배포를 통해 동시에 처리됩니다.  영역 중복은 모든 인바운드 또는 아웃바운드 흐름에서 단일 IP 주소를 사용하여 한 지역의 모든 가용성 영역을 통해 동시에 처리된다는 것을 의미합니다.

하나 이상의 가용성 영역이 실패할 수 있으며, 지역의 한 영역이 정상으로 유지되는 동안 데이터 경로가 유지됩니다. 영역 중복 구성은 기본값이며 추가 작업이 필요하지 않습니다.  지역에서 가용성 영역을 지원하는 기능을 확보하는 경우 기존 프런트 엔드는 자동으로 영역 중복이 됩니다.

다음 스크립트를 사용하여 내부 표준 Load Balancer에 대한 영역 중복 공용 IP 주소를 만듭니다. 구성에서 기존 Resource Manager 템플릿을 사용하는 경우 이러한 템플릿에 **sku** 섹션을 추가합니다.

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "public_ip_standard",
            "location": "region",
            "sku":
            {
                "name": "Standard"
            },
```

다음 스크립트를 사용하여 내부 표준 Load Balancer에 대한 영역 중복 프런트 엔드 IP 주소를 만듭니다. 구성에서 기존 Resource Manager 템플릿을 사용하는 경우 이러한 템플릿에 **sku** 섹션을 추가합니다.

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/loadBalancers",
            "name": "load_balancer_standard",
            "location": "region",
            "sku":
            {
                "name": "Standard"
            },
            "properties": {
                "frontendIPConfigurations": [
                    {
                        "name": "zone_redundant_frontend",
                        "properties": {
                            "subnet": {
                                "Id": "[variables('subnetRef')]"
                            },
                            "privateIPAddress": "10.0.0.6",
                            "privateIPAllocationMethod": "Static"
                        }
                    },
                ],
```

#### <a name="optional-zone-guarantee"></a>선택적 영역 보장

*영역 프런트 엔드*라고 하는 단일 영역에 대한 프런트 엔드를 보장하도록 선택할 수 있습니다.  즉, 모든 인바운드 또는 아웃바운드 흐름이 한 지역의 단일 영역에서 처리됩니다.  프런트 엔드는 영역의 상태와 수명을 공유합니다.  데이터 경로는 보장된 영역 이외의 영역에서 오류가 발생해도 영향을 받지 않습니다. 영역 프런트 엔드를 사용하여 가용성 영역별 IP 주소를 공개할 수 있습니다.  또한 영역 프런트 엔드를 직접 사용하거나, 프런트 엔드가 공용 IP 주소로 구성된 경우 [Traffic Manager](../traffic-manager/traffic-manager-overview.md)와 같은 DNS 부하 분산 제품과 통합하여 클라이언트가 여러 영역 IP 주소로 확인되는 단일 DNS 이름을 사용할 수 있습니다.  또한 이를 통해 부하 분산된 영역별 엔드포인트를 공개하여 각 영역을 개별적으로 모니터링할 수도 있습니다.  이러한 개념(동일한 백 엔드에 대한 영역 중복 및 영역)을 혼합하려면 [Azure Load Balancer의 다중 프런트 엔드](/load-balancer-multivip-overview.md)를 검토하세요.

공용 Load Balancer 프런트 엔드의 경우 프런트 엔드 IP 구성에서 참조하는 공용 IP에 *zones* 매개 변수를 추가합니다.  

내부 Load Balancer 프런트 엔드의 경우 내부 Load Balancer 프런트 엔드 IP 구성에 *zones* 매개 변수를 추가합니다. 영역 프런트 엔드는 Load Balancer에서 특정 영역에 대한 서브넷의 IP 주소를 보장하도록 합니다.

다음 스크립트를 사용하여 가용성 영역 1에 영역 표준 공용 IP 주소를 만듭니다. 구성에서 기존 Resource Manager 템플릿을 사용하는 경우 이러한 템플릿에 **sku** 섹션을 추가합니다.

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "public_ip_standard",
            "location": "region",
            "zones": [ "1" ],
            "sku":
            {
                "name": "Standard"
            },
```

다음 스크립트를 사용하여 가용성 영역 1에 내부 표준 Load Balancer 프런트 엔드를 만듭니다.

구성에서 기존 Resource Manager 템플릿을 사용하는 경우 이러한 템플릿에 **sku** 섹션을 추가합니다. 또한 자식 리소스에 대한 프런트 엔드 IP 구성에 **zones** 속성을 정의합니다.

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/loadBalancers",
            "name": "load_balancer_standard",
            "location": "region",
            "sku":
            {
                "name": "Standard"
            },
            "properties": {
                "frontendIPConfigurations": [
                    {
                        "name": "zonal_frontend_in_az1",
                        "zones": [ "1" ],
                        "properties": {
                            "subnet": {
                                "Id": "[variables('subnetRef')]"
                            },
                            "privateIPAddress": "10.0.0.6",
                            "privateIPAllocationMethod": "Static"
                        }
                    },
                ],
```

### <a name="cross-zone-load-balancing"></a>영역 간 부하 분산

영역 간 부하 분산은 Load Balancer에서 모든 영역의 백 엔드 엔드포인트에 연결하는 기능이며 프런트 엔드 및 해당 영역 조건과는 별개입니다.

단일 영역 내에서 배포를 조정하고 보장하려면 영역 프런트 엔드 및 영역 백 엔드 리소스를 동일한 영역에 맞춥니다. 별도의 작업이 필요하지 않습니다.

### <a name="backend"></a>백 엔드

Load Balancer는 Virtual Machines와 함께 작동합니다.  단일 VNet의 모든 VM은 영역에 대해 보장되었는지, 아니면 어떤 영역이 보장되었는지에 관계없이 백 엔드 풀에 포함될 수 있습니다.

프런트 엔드와 백 엔드를 단일 영역으로 조정하고 보장하려면 동일한 영역 내의 VM을 해당 백 엔드 풀에만 배치합니다.

여러 영역에서 VM을 처리하려면 여러 영역의 VM을 동일한 백 엔드 풀에 배치하기만 하면 됩니다.  가상 머신 확장 집합을 사용할 때 하나 이상의 가상 머신 확장 집합을 동일한 백 엔드 풀에 배치할 수 있습니다.  또한 각 가상 머신 확장 집합은 하나 또는 여러 영역에 있을 수 있습니다.

### <a name="outbound-connections"></a>아웃바운드 연결

[아웃바운드 연결](load-balancer-outbound-connections.md)은 모든 영역에서 처리되며, 가상 머신이 공용 Load Balancer 및 영역 중복 프런트 엔드와 연결되어 있으면 가용성 영역이 있는 지역에서 자동으로 영역 중복이 됩니다.  아웃바운드 연결 SNAT 포트 할당은 영역 오류에서 존속됩니다.  

차례로, VM이 공용 Load Balancer 및 영역 프런트 엔드와 연결되어 있으면 아웃바운드 연결이 단일 영역에서 처리되도록 보장됩니다.  아웃바운드 연결은 각 영역의 상태와 수명을 공유합니다.

SNAT 포트 사전 할당 및 알고리즘은 영역의 유무에 관계없이 동일합니다.

### <a name="health-probes"></a>상태 프로브

기존 상태 프로브 정의는 가용성 영역이 없는 상태로 그대로 유지되지만,  인프라 수준에서 상태 모델을 확장했습니다. 

영역 중복 프런트 엔드를 사용하는 경우, Load Balancer는 내부 상태 모델을 확장하여 각 가용성 영역에서 VM의 연결을 독립적으로 검색하고, 고객의 개입 없이 실패한 영역 간의 경로를 종료합니다.  지정된 영역의 Load Balancer 인프라에서 다른 영역의 VM으로 지정된 경로를 사용할 수 없는 경우 Load Balancer는 이 오류를 검색하고 방지할 수 있습니다. 이 VM에 연결할 수 있는 다른 영역은 해당 프런트 엔드에서 VM을 계속 처리할 수 있습니다.  따라서 오류 발생 시 각 영역마다 흐름 분포가 약간 다를 수도 있지만 종단 간 서비스의 전반적인 상태를 보호할 수 있습니다.

## <a name="design"></a> 디자인 고려 사항

Load Balancer는 가용성 영역의 컨텍스트에서 의도적으로 유연합니다. 영역에 맞게 조정되도록 선택하거나 영역 중복이 되도록 선택할 수 있습니다.  가용성이 증가하면 복잡성이 증가할 수 있으며, 최적의 성능에 맞게 가용성을 설계해야 합니다.  몇 가지 중요한 디자인 고려 사항에 대해 살펴보겠습니다.

### <a name="automatic-zone-redundancy"></a>자동 영역 중복

Load Balancer를 사용하면 단일 IP를 영역 중복 프런트 엔드로 간단하게 만들 수 있습니다. 영역 중복 IP 주소는 모든 영역에서 영역 리소스를 안전하게 처리할 수 있으며, 지역 내에서 하나의 영역이 정상 상태로 유지되는 동안 하나 이상의 영역 오류에서 존속할 수 있습니다. 반대로, 영역 프런트 엔드는 서비스를 단일 영역으로 축소하고 각 영역과 수명을 공유합니다.

영역 중복은 명시적으로 데이터 평면이며, 비충돌 데이터 경로 또는 제어 평면을 의미하지 않습니다. 영역 중복 흐름은 모든 영역을 사용할 수 있으며, 고객의 흐름에서는 한 지역의 모든 정상 영역을 사용합니다. 영역 오류가 발생하는 경우 해당 시점에서 정상 영역을 사용하는 트래픽 흐름은 영향을 받지 않습니다.  영역 오류 발생 시 영역을 사용하는 트래픽 흐름이 영향을 받을 수 있지만, Azure에서 영역 오류가 수렴된 후 재전송 또는 재설정 시 응용 프로그램이 복구될 수 있으며 지역 내의 나머지 정상 영역에서 이러한 흐름이 계속될 수 있습니다.

### <a name="xzonedesign"></a> 영역 간 경계

종단 간 서비스가 영역을 교차할 때마다 하나의 영역이 아니라 잠재적으로 여러 영역과 수명을 공유한다는 것을 이해하는 것이 중요합니다.  결과적으로 종단 간 서비스에서 비영역 배포를 통해 가용성을 얻지 못할 수 있습니다.

가용성 영역을 사용할 때 가용성 향상을 무효화하는 의도하지 않은 영역 간 종속성이 도입되지 않도록 합니다.  응용 프로그램이 여러 구성 요소로 구성되어 있고 영역 오류에 대한 복원력을 유지하려는 경우 영역 오류 발생 시 충분한 주요 구성 요소가 존속되도록 주의해야 합니다.  예를 들어 응용 프로그램의 중요한 단일 구성 요소가 존속된 영역이 아닌 다른 영역에만 있는 경우 전체 응용 프로그램에 영향을 줄 수 있습니다.  또한 영역 복원 및 응용 프로그램에서 수렴하는 방법도 고려해야 합니다. 몇 가지 핵심 요점을 검토하고 질문에 대한 영감으로 사용하여 특정 시나리오에 대해 충분히 생각해 보겠습니다.

- 응용 프로그램에 두 가지 구성 요소(예: IP 주소 및 관리 디스크가 있는 VM)가 있고 영역 1과 영역 2에서 보장되는 경우, 영역 1이 실패하면 영역 1 실패 시 종단 간 서비스가 존속되지 않습니다.  잠재적으로 위험한 오류 모드를 만들고 있다는 것을 완전히 이해하지 못하면 영역을 교차하지 마세요.

- 응용 프로그램에 두 가지 구성 요소(예: IP 주소 및 관리 디스크가 있는 VM)가 있고 각각 영역 중복 및 영역 1이 되도록 보장되는 경우, 영역 1이 실패하지 않는 한 종단 간 서비스가 영역 2, 영역 3 또는 둘 다의 영역 오류에서 존속됩니다.  그러나 프런트 엔드의 연결을 관찰하는 경우 서비스의 상태에 대한 이유를 추론할 수 있는 일부 기능이 손실됩니다.  더 광범위한 상태 및 용량 모델을 개발하는 것이 좋습니다.  영역 중복 및 영역 개념을 함께 사용하여 통찰력과 관리 효율성을 확장할 수 있습니다.

- 응용 프로그램에 두 가지 구성 요소(예: 영역 중복 Load Balancer 프런트 엔드 및 세 개 영역에 있는 영역 간 가상 머신 확장 집합)가 있는 경우, 오류의 영향을 받지 않는 영역의 리소스를 사용할 수 있지만 영역 오류 발생 시 용량 측면에서 종단 간 서비스의 성능이 저하될 수 있습니다. 인프라 관점에서 볼 때 배포는 하나 이상의 영역 오류에서 존속될 수 있으며, 다음과 같은 질문이 제기됩니다.
  - 응용 프로그램에서 이러한 오류 및 용량 저하에 대한 이유를 추론하는 방법을 이해하고 있습니까?
  - 필요한 경우 지역 쌍에 장애 조치를 강제로 적용하기 위해 서비스에 세이프가드가 필요합니까?
  - 이러한 시나리오는 어떻게 모니터링, 검색 및 완화합니까? 표준 Load Balancer 진단을 사용하여 종단 간 서비스 성능의 모니터링을 보강할 수 있습니다. 전체적인 그림에서 사용 가능한 항목과 보강해야 하는 항목을 고려하세요.

- 영역은 오류를 더 쉽게 이해하고 포함하도록 만들 수 있습니다.  그러나 시간 제한, 재시도 및 백오프 알고리즘과 같은 개념에 있어 영역 오류는 다른 오류와 차이가 없습니다. Azure Load Balancer는 영역 중복 경로를 제공하고 패킷 수준에서 실시간으로 신속하게 복구하려고 하지만, 오류가 발생하는 동안 재전송 또는 재설정이 발생할 수 있으며 응용 프로그램에서 이 오류에 대응하는 방법을 이해해야 합니다. 부하 분산 체계는 유지되지만 다음 질문에 대한 계획이 필요합니다.
  - 영역에 오류가 발생하면 종단 간 서비스에서 이를 이해하고, 상태가 손실되면 어떻게 복구합니까?
  - 영역이 반환되면 응용 프로그램에서 안전하게 수렴하는 방법을 이해하고 있습니까?

### <a name="zonalityguidance"></a> 영역 중복 및 영역

영역 중복은 서비스에 대한 단일 IP 주소를 사용하여 영역 중립적인 복원 옵션을 제공할 수 있습니다.  이에 따라 복잡성을 줄일 수 있습니다.  영역 중복은 영역 간 이동성을 가지고 있으며 모든 영역의 리소스에서 안전하게 사용할 수도 있습니다.  또한 가용성 영역이 없는 지역에서 미래의 증거가 될 수 있으며, 지역에서 가용성 영역을 확보하게 되면 필요한 변경을 제한할 수 있습니다.  영역 중복 IP 주소 또는 프런트 엔드에 대한 구성 구문은 가용성 영역이 없는 영역을 포함하여 모든 지역에서 성공합니다.

영역은 영역의 상태와 수명을 공유하면서 영역에 대한 명시적 보증을 제공할 수 있습니다. 영역 IP 주소 또는 영역 Load Balancer 프런트 엔드를 연결하는 것은 특히 연결된 리소스가 동일한 영역의 영역 VM인 경우 바람직하거나 합리적인 특성이 될 수 있습니다.  또는 응용 프로그램에 리소스가 있는 영역에 대한 명시적 기술이 필요하고, 별도의 영역에서 가용성에 대한 이유를 명시적으로 추론하려고 합니다.  영역 전체에서 분산된 종단 간 서비스에 대해 여러 영역 프런트 엔드를 공개하도록 선택할 수 있습니다(즉, 여러 영역 가상 머신 확장 집합에 대해 영역 프런트 엔드별).  그리고 영역 프런트 엔드가 공용 IP 주소인 경우, [Traffic Manager](../traffic-manager/traffic-manager-overview.md)를 사용하여 서비스를 공개하는 데 이러한 여러 영역 프런트 엔드를 사용할 수 있습니다.  또는 여러 영역 프런트 엔드를 사용하여 타사 모니터링 솔루션을 통해 영역별 상태 및 성능 정보를 얻고, 영역 중복 프런트 엔드를 사용하여 전체 서비스를 공개할 수 있습니다. 동일한 영역에 맞게 조정된 영역 프런트 엔드가 있는 영역 리소스만 처리하고, 영역 리소스에 잠재적으로 위험한 영역 간 시나리오는 방지해야 합니다.  영역 리소스는 가용성 영역이 있는 지역에만 존재합니다.

서비스 아키텍처를 알지 못하면 다른 서비스보다 더 나은 선택이라는 일반적인 지침이 없습니다.

## <a name="limitations"></a>제한 사항

- 데이터 평면은 완전히 영역 중복(영역 보증이 지정되지 않은 경우)이지만, 제어 평면 작업은 영역 중복이 될 수 없습니다.

## <a name="next-steps"></a>다음 단계
- [가용성 영역](../availability-zones/az-overview.md)에 대해 자세히 알아보기
- [표준 Load Balancer](load-balancer-standard-overview.md)에 대해 자세히 알아봅니다.
- [영역 프런트 엔드를 통해 표준 Load Balancer를 사용하여 영역 내에 VM을 부하 분산](load-balancer-standard-public-zonal-cli.md)하는 방법에 대해 알아보기
- [영역 중복 프런트 엔드를 통해 표준 Load Balancer를 사용하여 영역에서 VM을 부하 분산](load-balancer-standard-public-zone-redundant-cli.md)하는 방법에 대해 알아보기
