---
title: "Azure IoT Edge 장치를 게이트웨이로 사용 | Microsoft Docs"
description: "Azure IoT Edge를 사용하여 데이터를 여러 다운스트림 장치에서 클라우드로 보내거나 로컬로 처리하는 투명, 불투명 또는 프록시 게이트웨이 장치를 만듭니다."
services: iot-edge
keywords: 
author: kgremban
manager: timlt
ms.author: kgremban
ms.date: 11/27/2017
ms.topic: article
ms.service: iot-edge
ms.openlocfilehash: fe7ad2444b9378550e9624e3d109c8be4fd29f23
ms.sourcegitcommit: d87b039e13a5f8df1ee9d82a727e6bc04715c341
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/21/2018
---
# <a name="how-an-iot-edge-device-can-be-used-as-a-gateway---preview"></a>IoT Edge 장치를 게이트웨이로 사용하는 방법 - 미리 보기

IoT 솔루션에서 게이트웨이의 목적은 솔루션에 국한되며 장치 연결을 에지 분석과 결합합니다. Azure IoT Edge는 연결, ID 또는 에지 분석과의 관련성에 관계없이 IoT 게이트웨이에 대한 모든 요구를 충족하는 데 사용할 수 있습니다. 이 문서의 게이트웨이 패턴은 장치 데이터가 게이트웨이에서 처리되는 방식이 아닌 다운스트림 장치 연결 및 장치 ID의 특징만을 참조합니다.

## <a name="patterns"></a>패턴
IoT Edge 장치를 게이트웨이로 사용하는 세 가지 패턴은 투명, 프로토콜 변환 및 ID 변환입니다.
* **투명** – 이론적으로 IoT Hub에 연결할 수 있는 장치는 게이트웨이 장치에도 연결할 수 있습니다. 이는 다운스트림 장치가 자체 IoT Hub ID를 가지며 MQTT, AMQP 또는 HTTP 프로토콜 중 하나를 사용한다는 의미입니다. 게이트웨이는 단순히 장치와 IoT Hub 사이에서 통신을 전달합니다. 장치는 게이트웨이를 통해 클라우드와 통신한다는 사실을 모르고, IoT Hub의 장치와 상호 작용하는 사용자는 중간에 존재하는 게이트웨이 장치를 인식하지 못합니다. 따라서 게이트웨이가 투명합니다. IoT Edge 장치를 투명 게이트웨이로 사용하는 자세한 방법은 [투명 게이트웨이 만들기][lnk-iot-edge-as-transparent-gateway]를 참조하세요.
* **프로토콜 변환** – MQTT, AMQP 또는 HTTP를 지원하지 않는 장치는 게이트웨이 장치를 사용하여 데이터를 IoT Hub에 보냅니다. 게이트웨이는 다운스트림 장치에서 사용하는 프로토콜을 이해할 수 있지만 IoT Hub에서 ID가 있는 유일한 장치입니다. 모든 정보는 하나의 장치인 게이트웨이에서 오는 것처럼 보입니다. 이는 클라우드 응용 프로그램에서 장치별로 데이터를 추론하기를 원하는 경우 다운스트림 장치가 추가 식별 정보를 메시지에 포함해야 한다는 의미입니다. 또한 트윈 앤 메서드 같은 IoT Hub 기본 형식은 게이트웨이 장치에만 제공되고 다운스트림 장치에는 제공되지 않습니다.
* **ID 변환** - IoT Hub에 연결할 수 없는 장치는 다운스트림 장치 대신 IoT Hub ID 및 프로토콜 변환을 제공하는 게이트웨이 장치에 연결합니다. 게이트웨이는 다운스트림 장치에서 사용하는 프로토콜을 이해하고, 장치에 ID를 제공하고, IoT Hub 기본 형식을 변환합니다. 다운스트림 장치는 IoT Hub에 트윈 앤 메서드를 사용하는 클래스 1 장치로 표시됩니다. 사용자는 중간에 있는 게이트웨이 장치를 인식하지 못하면서 IoT Hub의 장치와 상호 작용할 수 있습니다.

![게이트웨이 패턴 다이어그램][1]

## <a name="use-cases"></a>사용 사례
모든 게이트웨이 패턴은 다음과 같은 이점을 제공합니다.
* **에지 분석** – 클라우드에 전체 충실도 원격 분석 데이터를 보내지 않고 AI 서비스를 로컬로 사용하여 다운스트림 장치에서 오는 데이터를 처리합니다. 고급 정보를 로컬로 검색하여 대응하고 IoT Hub에는 데이터 하위 집합만 보냅니다. 
* **다운스트림 장치 격리** – 게이트웨이 장치는 모든 다운스트림 장치를 인터넷에 노출되지 않도록 보호할 수 있습니다. 연결 기능이 없는 OT 네트워크와 웹 액세스를 제공하는 IT 네트워크 사이에 배치할 수 있습니다. 
* **연결 멀티플렉싱** - IoT Edge 장치를 통해 IoT Hub에 연결하는 모든 장치는 동일한 기본 연결을 사용합니다.
* **트래픽 다듬기** - IoT Edge 장치는 IoT Hub 제한이 발생할 경우 메시지를 로컬로 유지하면서 기하급수적 백오프를 자동으로 구현합니다. 이를 통해 트래픽이 급증할 때 솔루션의 복원력이 보장됩니다.
* **제한된 오프라인 지원** - 게이트웨이 장치는 IoT Hub로 전달할 수 없는 메시지 및 트윈 업데이트를 로컬로 저장합니다.

게이트웨이는 프로토콜 변환을 수행하며 에지 분석, 장치 격리, 트래픽 다듬기, 리소스 제약 조건이 있는 기존 장치 및 새 장치에 대한 오프라인 지원도 수행할 수 있습니다. 많은 기존 장치가 비즈니스 통찰력을 얻을 수 있는 데이터를 생산하지만, 클라우드 연결을 염두에 두고 개발되지는 않았습니다. 불투명 게이트웨이는 종단 간 IoT 솔루션에서 이 데이터를 잠금 해제하고 사용할 수 있습니다.

ID를 변환하는 게이트웨이는 프로토콜 변환의 이점을 제공할 뿐 아니라 클라우드에서 다운스트림 장치를 완벽하게 관리할 수 있습니다. IoT 솔루션의 모든 장치는 통신하는 프로토콜에 관계없이 IoT Hub에 표시됩니다.

## <a name="cheat-sheet"></a>참고 자료
다음은 투명, 불투명 및 프록시 게이트웨이를 사용할 때의 IoT Hub 기본 형식을 비교한 간략한 참고 자료입니다.

| &nbsp; | 투명 게이트웨이 | 프로토콜 변환 | ID 변환 |
|--------|-------------|--------|--------|
| IoT Hub ID 레지스트리에 저장된 ID | 연결된 모든 장치의 ID | 게이트웨이 장치의 ID만 | 연결된 모든 장치의 ID |
| 장치 쌍 | 연결된 각 장치에 자체 장치 쌍이 있음 | 게이트웨이에만 장치 및 모듈 쌍이 있음 | 연결된 각 장치에 자체 장치 쌍이 있음 |
| 직접 방식 및 클라우드-장치 메시지 | 클라우드가 연결된 각 장치를 개별적으로 처리할 수 있음 | 클라우드가 게이트웨이 장치만 처리할 수 있음 | 클라우드가 연결된 각 장치를 개별적으로 처리할 수 있음 |
| [IoT Hub 제한 및 할당량][lnk-iothub-throttles-quotas] | 각 장치에 적용 | 게이트웨이 장치에 적용 | 각 장치에 적용 |

불투명 게이트웨이(프로토콜 변환) 패턴을 사용하는 경우 해당 게이트웨이 통해 연결되는 모든 장치는 최대 50개의 메시지를 포함할 수 있는 동일한 클라우드-장치 큐를 공유합니다. 따라서 불투명 게이트웨이 패턴은 각 필드 게이트웨이를 통해 연결되는 장치 수가 매우 적고 해당 클라우드-장치의 트래픽이 낮을 때만 사용해야 합니다.

## <a name="next-steps"></a>다음 단계
IoT Edge 장치를 [투명 게이트웨이][lnk-iot-edge-as-transparent-gateway]로 사용 

[lnk-iot-edge-as-transparent-gateway]: ./how-to-create-transparent-gateway.md
[lnk-iothub-throttles-quotas]: ../iot-hub/iot-hub-devguide-quotas-throttling.md

[1]: ./media/iot-edge-as-gateway/edge-as-gateway.png
