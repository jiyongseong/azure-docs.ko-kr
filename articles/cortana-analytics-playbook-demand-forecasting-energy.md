---
title: "에너지 수요 예측을 위한 Cortana Intelligence 솔루션 템플릿 플레이 북 | Microsoft Docs"
description: "에너지 공익 사업체에서 수요를 예측할 수 있도록 하는 Microsoft Cortana Intelligence 솔루션 템플릿입니다."
services: cortana-analytics
documentationcenter: 
author: ilanr9
manager: ilanr9
editor: yijichen
ms.assetid: 8855dbb9-8543-45b9-b4c6-aa743a04d547
ms.service: cortana-analytics
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/24/2016
ms.author: ilanr9;yijichen;garye
ms.openlocfilehash: 275e387878900154660d044b26ff5ac03a17a65a
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/11/2017
---
# <a name="cortana-intelligence-solution-template-playbook-for-demand-forecasting-of-energy"></a>에너지 수요 예측을 위한 Cortana Intelligence 솔루션 템플릿 플레이 북
## <a name="executive-summary"></a>요약
지난 몇 년 동안, 사물 인터넷(IoT), 대체 에너지원 및 빅 데이터의 병합은 공익 사업 및 에너지 영역에 엄청난 기회를 창출했습니다. 이와 동시에, 공익 사업 및 전체 에너지 분야에서 에너지 사용을 제어하는 데 소비자가 요구하는 향상된 방법으로 소비량이 안정된 것으로 나타났습니다. 따라서, 공익 사업 및 스마트 그리드 회사는 더욱 더 스스로 혁신하고 새롭게 태어나야 합니다. 또한 많은 전력 및 공익 사업 그리드가 노후되고 유지 관리하는 데 비용이 많이 들고 있습니다. 지난 해, 팀은 에너지 영역과 여러 협력 관계를 맺었습니다. 이러한 협력 진행 중에 공익 사업 또는 ISV(독립 소프트웨어 공급업체)가 미래 에너지 수요의 예측을 조사하는 다양한 사례를 접했습니다. 이러한 예측은 현재와 미래 비즈니스에 중요한 역할을 하며 다양한 사용 사례를 위한 기초가 됩니다. 여기에는 단기 및 장기 전원 부하 예측, 거래, 부하 분산 및 그리드 최적화 등이 포함됩니다. ML(기계 학습)과 같은 빅 데이터 및 고급 분석(AA) 메서드는 정확하고 신뢰할 수 있는 예측을 생성하기 위한 핵심 요소입니다.  

이 플레이 북은 에너지 요구 예측 솔루션의 성공적인 개발 및 배포에 필요한 비즈니스 및 분석 지침을 함께 제공합니다. 이러한 제안된 지침은 공익 사업자, 데이터 과학자 및 데이터 엔지니어가 완전히 조작 가능한 클라우드 기반, 수요 예측 솔루션을 구축하는 데 도움이 될 수 있습니다. 이제 막 빅 데이터와 고급 분석 과정을 시작한 회사는 이러한 솔루션이 장기적인 스마트 그리드 전략에서 초기 시드를 나타낼 수 있습니다.

> [!TIP]
> 이 템플릿에 대한 아키텍처 개요를 제공하는 다이어그램을 다운로드하려면 [에너지 수요 예측을 위한 Cortana Intelligence 솔루션 템플릿 아키텍처](cortana-analytics-architecture-demand-forecasting-energy.md)를 참조하세요.  
> 
> 

## <a name="overview"></a>개요
이 문서에서는 Cortana Intelligence 사용의 비즈니스, 데이터 및 기술적 측면을 설명하며 특히, 에너지 예측 솔루션의 구현 및 배포를 위한 AML(Azure 기계 학습)에 대해 설명합니다. 문서는 세 가지 주요 부분으로 구성됩니다.  

1. 비즈니스 이해  
2. 데이터 이해  
3. 기술 구현

**비즈니스 이해** 부분에서는 투자 결정을 하기 전에 이해 및 고려해야 하는 비즈니스 측면에 대해 간략히 설명합니다. 예측 분석 및 기계 학습이 실제로 유효하고 적용 가능한지 확인하기 위해 비즈니스 문제를 한정하는 방법을 설명합니다. 또한 기계 학습의 기본 사항과 에너지 예측 문제를 해결하는 데 어떻게 사용하는지도 설명합니다. 사용 사례의 필수 구성 요소 및 자격 조건에 대해 간략히 설명합니다. 일부 샘플 사용 사례와 비즈니스 사례 시나리오도 제공됩니다.

데이터는 기계 학습 솔루션을 위한 주요 요소입니다. 이 문서의 **데이터 이해** 부분에서는 데이터의 몇 가지 중요한 측면에 대해 설명합니다. 에너지 예측에 필요한 데이터 종류, 데이터 품질 요구 사항 및 일반적으로 어떤 데이터 원본이 존재하는지를 간략히 설명합니다. 또한 실제로 모델링 부분을 구동하는 데이터 기능을 준비하는 데 원시 데이터를 어떻게 사용할 수 있는지도 설명합니다.

문서의 세 번째 부분에서는 솔루션의 **기술 구현** 측면에 대해 설명합니다. 기능 엔지니어링 및 모델링은 데이터 과학 프로세스의 핵심이므로 좀 더 자세히 논의됩니다. 예측 분석 솔루션의 클라우드 배포를 위한 중요한 수단인 웹 서비스의 개념에 대해 설명합니다. 종단 간 조작 가능한 솔루션의 일반적인 아키텍처도 간략하게 설명합니다.

또한 이 문서는 도메인 및 기술에 대한 이해를 돕는 데 사용할 수 있는 참조 자료를 포함합니다.

이 문서에서는 데이터 과학 프로세스, 수학 및 기술적 측면에 대해 심도 있게 다루지 않는다는 것에 유의해야 합니다. 이러한 세부 정보는 [Azure 기계 학습 설명서](http://azure.microsoft.com/services/machine-learning/) 및 [블로그](http://blogs.microsoft.com/blog/tag/azure-machine-learning/)에서 확인할 수 있습니다.

### <a name="target-audience"></a>대상 사용자
이 문서의 대상 사용자는 기계 학습 기반 솔루션에 대한 정보와 이 솔루션을 에너지 예측 도메인 내에서 구체적으로 어떻게 사용하는지 알고자 하는 비즈니스 및 기술 담당자입니다.

또한 데이터 과학자는 이 문서를 읽고 에너지 예측 솔루션의 배포를 구동하는 상위 수준의 프로세스를 보다 잘 이해할 수 있습니다. 이 컨텍스트에서 보다 자세한 고급 자료를 위한 적절한 기준선과 시작 지점을 설정하는 데도 사용할 수 있습니다.

### <a name="industry-trends"></a>산업 동향
지난 몇 년 동안, IoT, 대체 에너지원 및 빅 데이터의 병합은 공익 사업 및 에너지 영역에 엄청난 기회를 창출했습니다. 이와 동시에, 공익 사업 및 전체 에너지 분야에서 에너지 사용을 제어하는 데 소비자가 요구하는 향상된 방법으로 소비량이 안정된 것으로 나타났습니다.

수많은 공익 사업 및 스마트 그리드 회사가 그리드로 생성된 데이터를 활용하는 다양한 사용 사례를 배포하여 [스마트 그리드](https://en.wikipedia.org/wiki/Smart_grid)를 개척해왔습니다. 많은 사용 사례가 전기를 누적하거나 재고로 따로 저장할 수 없다는 전기 발전의 고유한 특징을 중심으로 이루어집니다. 따라서 생성되는 전기를 사용해야 합니다. 보다 많은 효율성을 확보하고자 하는 공익 사업체는 전력 소비량을 예측하기만 하면 됩니다. **공급과 수요의 균형**을 맞추는 기능이 뛰어나 에너지 낭비를 방지하면 **온실 가스 방출이 줄어들고** 비용을 제어할 수 있기 때문입니다.

비용에 관해 이야기할 때 가격이라는 다른 중요한 측면이 있습니다. 공익 사업 간 전력을 거래하는 새로운 기능은 **전기의 향후 수요 및 향후 가격 예측**에 대한 필요성을 가져왔습니다. 그러면 회사는 발전량을 결정할 수 있습니다.

'스마트'라는 단어를 사용할 때 실제로 학습 및 예측할 수 있는 그리드를 나타냅니다. 소비량의 계절별 변동을 예상할 수 있으며 **임시 오버로드 상황을 예견하고 자동으로 조정**할 수 있습니다. 스마트 측정기를 활용하여 소비량을 원격으로 조정하여 지역화된 오버로드 상황을 처리할 수 있습니다. **먼저 예측한 후 조치**하는 방식으로 그리드는 시간이 지남에 따라 더욱 지능적이 됩니다.

이 문서의 나머지 부분에서는 미래, 단기 및 장기 에너지 수요를 예측하는 사용 사례에 대한 특정 제품군을 중점적으로 설명합니다. 몇 개월 동안 이러한 분야에 대해 작업해왔으며 산업 등급 결과를 생성할 수 있는 몇 가지 지식과 기술을 획득했습니다. 다른 사용 사례도 향후 이 문서에서 다룰 예정입니다.

## <a name="business-understanding"></a>비즈니스 이해
### <a name="business-goals"></a>비즈니스 목표
**에너지 데모** 목표는 매우 짧은 시간 프레임에 배포할 수 있는 일반적인 예측 분석 및 기계 학습 솔루션을 설명하는 데 있습니다. 특히 현재 초점은 에너지 수요 예측 솔루션을 사용하여 비즈니스 가치를 신속하게 실현하고 활용할 수 있도록 하는 것입니다. 이 플레이 북의 정보는 다음과 같은 목표를 수행하는 고객에게 유용할 수 있습니다.

* 단기간에 기계 학습 기반 솔루션의 가치 창출
* 파일럿 사용 사례를 다른 사용 사례로 확장하거나 비즈니스 요구를 기반으로 보다 넓은 범위로 확장하는 기능
* Cortana Intelligence Suite 제품 지식을 신속하게 획득

이 플레이 북은 이러한 목표를 염두에 두고 이러한 목표를 달성하는 데 도움이 되는 비즈니스 및 기술 지식을 제공하는 것을 목표로 합니다.

### <a name="power-load-and-demand-forecasting"></a>전원 부하 및 수요 예측
에너지 분야 내에서 여러 가지 방법으로 수요 예측을 통해 중요한 비즈니스 문제를 해결할 수 있습니다. 사실, 수요 예측은 업계의 수많은 사용 사례를 위한 기초로 고려할 수 있습니다. 일반적으로 단기 및 장기라는 두 가지 유형의 에너지 수요 예측을 고려합니다. 각각 서로 다른 목적이 있으며 서로 다른 방법을 활용할 수 있습니다. 둘 사이의 주요 차이점은 예측 기간으로, 우리가 예측할 미래 시간 범위입니다.

#### <a name="short-term-load-forecasting"></a>단기 부하 예측
에너지 수요 컨텍스트 내에서 단기 부하 예측(STLF)은 가까운 미래에 다양한 그리드 부분(또는 전체 그리드)에서 예측되는 집계된 로드로 정의됩니다. 이 컨텍스트에서 단기는 1시간~24시간 범위 내의 시간으로 정의됩니다. 일부 경우에 48시간 범위도 가능합니다. 따라서 STLF는 그리드의 운영 사용 사례에 매우 일반적입니다. STLF 기반 사용 사례의 몇 가지 예는 다음과 같습니다.

* 공급과 수요 균형 조정
* 전원 거래 지원
* 시장 조성(전력 가격 설정)
* 그리드 운영 최적화
* [수요 대응](https://en.wikipedia.org/wiki/Demand_response)
* 최고 수요 예측
* 수요 관리
* 부하 분산 및 오버로드 방지
* 장기 부하 예측
* 장애 및 이상 감지
* 최고 단축/평준화 

STLF 모델은 주로 가까운 과거(마지막 날 또는 주) 소비량 데이터를 기반으로 하며 예측된 온도를 중요한 예측 변수로 사용합니다. 1시간부터 최대 24시간까지의 정확한 온도 예측을 확보하는 것은 오늘날 그다지 어려운 일이 아닙니다. 이러한 모델은 계절성 패턴 또는 장기 소비량 추세에 덜 민감합니다.

또한 SLTF 솔루션은 매시간 호출되고 일부 경우에는 보다 높은 빈도로 호출되므로 많은 양의 예측 호출(서비스 요청)를 생성할 가능성이 높습니다. 각 개별 변전소 또는 변압기가 독립 실행형 모델로 표현되는 이식이 매우 일반적으로 표시되므로 예측 요청의 양이 훨씬 많습니다.

#### <a name="long-term-load-forecasting"></a>장기 부하 예측
장기 부하 예측(LTLF)의 목표는 1주~몇 달(일부 경우 몇 년 동안) 범위의 시간으로 전원 수요를 예측하는 것입니다. 이 시간 범위는 주로 계획 중이고 투자 사용 사례에 적용 가능합니다.

장기 시나리오는 몇 년 동안의 고품질 데이터를 보유하는 데 중요합니다(최소 3년). 이러한 모델은 일반적으로 과거 데이터에서 계절성 패턴을 추출하고 날씨 및 기후 패턴과 같은 외부 예측 요소를 활용합니다.

예측 기간이 길수록 예측 정확도는 떨어진다는 점을 명확히 해야 합니다. 따라서 사용자가 가능한 변형을 계획 과정에 반영할 수 있도록 실제 예측과 함께 신뢰 구간을 생성하는 것이 중요합니다.

LTLF에 대한 소비량 시나리오는 대부분 계획 중이므로 STLF에 비해 훨씬 낮은 예측 양을 예상할 수 있습니다. 일반적으로 이러한 예측은 Excel 또는 PowerBI와 같은 시각화 도구에 포함되며 사용자가 수동으로 호출합니다.

### <a name="short-term-vs-long-term-prediction"></a>단기 및 장기 예측 비교
다음 표에서는 가장 중요한 특성에 관하여 STLF 및 LTLF를 비교합니다.

| 특성 | 단기 부하 예측 | 장기 부하 예측 |
| --- | --- | --- |
| 예측 기간 |1시간~48시간 |1~6개월 이상 |
| 데이터 세분성 |매시간 |매시간 또는 매일 |
| 일반적인 사용 사례 |<ul><li>공급과 수요의 균형</li><li>최대 시간 예측</li><li>수요 대응</li></ul> |<ul><li>장기 계획</li><li>그리드 자산 계획</li><li>리소스 계획</li></ul> |
| 일반적인 예측 변수 |<ul><li>일 또는 주</li><li>하루 중 시간</li><li>시간별 온도</li></ul> |<ul><li>연간 월</li><li>날짜</li><li>장기 온도 및 기후</li></ul> |
| 과거 데이터 범위 |2-3년 분량의 데이터 |5-10년 분량의 데이터 |
| 일반적인 정확도 |5% 이하의 MAPE* |25% 이하의 MAPE* |
| 예측 빈도 |1시간 또는 24시간마다 생성됨 |월별, 분기별 또는 매년 한 번 생성됨 |

\*[MAPE](https://en.wikipedia.org/wiki/Mean_absolute_percentage_error) – 평균 백분율 오차(Mean Average Percent Error)

이 표에서 볼 수 있듯이 다양한 비즈니스 요구를 나타내며 서로 다른 배포 및 소비량 패턴을 포함할 수 있으므로 단기 및 장기 예측 시나리오를 구분하는 것이 매우 중요합니다.

### <a name="example-use-case-1-esmart-systems--overload-optimization"></a>사용 사례 예 1: eSmart 시스템 - 오버로드 최적화
[스마트 그리드](https://en.wikipedia.org/wiki/Smart_grid) 의 중요한 역할은 변동되는 소비량 패턴을 동적으로 지속적으로 최적화하고 조정하는 것입니다. 전력 소비량은 주로 온도 변화로 인한 장기 변동의 영향을 받을 수 있습니다(*예:*냉방 또는 난방에 많은 전력이 사용됨). 이와 동시에 전력 소비량은 장기 추세의 영향도 받습니다. 여기에는 계절성 효과, 국경일, 장기 소비량 증가 및 소비자 지수, 유가 및 GDP와 같은 경제적 요인도 포함될 수 있습니다.

이 사용 사례에서 [eSmart](http://www.esmartsystems.com/) 는 그리드의 지정된 변전소에서 오버로드 상황의 성향을 예측할 수 있는 클라우드 기반 솔루션을 배포하려고 합니다. 특히, eSmart는 1시간 이내 오버로드가 발생할 가능성이 있는 변전소를 식별하여 즉각적인 조치를 취하고 해당 상황을 피하거나 해결하려고 합니다.

정확하고 신속한 예측 수행을 위해서는 세 가지 예측 모델을 구현해야 합니다.

* 다음 몇 주 또는 몇 개월 동안 각 변전소에서 전력 소비량을 예측할 수 있는 장기 모델
* 1시간 동안 지정된 변전소에서 오버로드 상황을 예측할 수 있는 단기 모델
* 여러 시나리오에 대해 향후 온도 예측을 제공하는 온도 모델

장기 모델의 목적은 다음 주 또는 월 동안 오버로드 성향별(특정 송전 용량)로 변전소에 순위를 지정하는 것입니다. 이를 통해 단기 예측을 위한 입력으로 제공할 변전소에 대한 간단한 목록을 작성할 수 있습니다. 온도는 장기 모델을 위한 중요한 예측 변수이므로 지속적으로 다중 시나리오 온도 예측을 생성하고 이를 장기 모델에 대한 입력으로 공급해야 합니다. 그런 다음 1시간 동안 오버로드가 발생할 가능성이 있는 변전소를 예측하기 위해 단기 예측이 호출됩니다.

단기 및 장기 모델은 변전소별로 개별적으로 배포됩니다. 따라서 이러한 모델의 실제 실행을 위해서는 광범위한 오케스트레이션이 필요합니다. 단기간에 높은 예측 정확도를 실현하기 위해 각 시간 동안 더 세분화된 모델이 전용으로 사용됩니다. 이러한 모든 모델은 1시간마다 실행되며 몇 분 이내 실행이 완료되어 필요한 경우 이에 대응하고 예방 조치를 할 충분한 시간이 주어집니다. 이 모델 컬렉션은 최근 데이터를 사용하여 정기적으로 재학습하는 방법으로 최신 상태를 유지합니다.

이 사용 사례에 대한 자세한 내용은 [여기](https://customers.microsoft.com/Pages/CustomerStory.aspx?recid=18945)에 있습니다.

#### <a name="use-case-qualification-criteria--prerequisites"></a>사용 사례 자격 조건 - 필수 구성 요소
Cortana Intelligence의 주요 강점은 기계 학습 중심 솔루션을 배포 및 확장하는 강력한 기능입니다. 동시에 실행되는 수천 개의 예측을 지원하도록 설계되었습니다. 변동되는 소비량 패턴에 맞게 자동으로 규모가 조정됩니다. 따라서 솔루션의 초점은 정확도와 컴퓨팅 성능에 있습니다. 예를 들어 공익 사업체는 1시간, 시간별로 정확한 에너지 수요 예측을 생성하는 데 관심이 있습니다. 반면, 우리는 수요가 그렇게 예측되는 이유를 묻는 질문에 대한 응답에는 관심이 적습니다(모델 자체가 처리).

따라서 모든 사용 사례 및 비즈니스 문제를 기계 학습으로 효과적으로 해결할 수 없다는 것을 깨달아야 합니다.

Cortana Intelligence 및 기계 학습은 다음 조건이 충족되는 경우 특정 비즈니스 문제 해결에 매우 효과적일 수 있습니다.

* 현재 비즈니스 문제가 사실상 **예측** 가능합니다. 예측 사용 사례 예제는 1시간 동안 주어진 변전소에서 전원 부하를 예측하는 공익 사업체입니다. 반면에 과거 수요의 요인을 분석하고 순위를 지정하는 것은 사실상 **구체적** 이므로 해당되지 않습니다.
* 일반 예측이 가능하면 확실한 **조치 경로** 가 있습니다. 예를 들어, 1시간 동안 변전소에서 오버로드를 예측하면 변전소와 관련된 부하를 줄이고 잠재적으로 오버로드를 방지하는 사전 조치를 트리거할 수 있습니다.
* 이 사용 사례는 해결할 경우 다른 유사한 사용 사례를 해결하는 방법을 마련할 수 있는 **일반적인 문제 유형** 을 나타냅니다.
* 고객은 **정량적 및 정성적 목표** 를 설정하여 성공적인 솔루션 구현을 보여 줄 수 있습니다. 예를 들어, 에너지 수요 예측에 대한 적절한 정량적 목표는 필요한 정확도 임계값(*예:*최대 5% 오차 허용)이 될 수 있으며 변전소 오버로드를 예측할 경우 정밀도(참 긍정 비율) 및 회수(참 긍정 범위)가 주어진 임계값 이상이어야 합니다. 이러한 목표는 고객의 비즈니스 목표에서 파생되어야 합니다.
* 회사의 비즈니스 워크플로를 사용하는 확실한 **통합 시나리오** 가 있습니다. 예를 들어 변전소 부하 예측을 그리드 제어 센터에 통합하여 오버로드 방지 활용을 허용할 수 있습니다.
* 고객은 사용 사례를 지원하기 위해 **충분한 품질의 데이터**를 사용할 준비가 되었습니다(자세한 내용은 이 플레이 북의 다음 섹션, **데이터 품질** 참조).
* 고객은 Azure 기계 학습 및 기타 Cortana Intelligence Suite 구성 요소를 비롯한 클라우드 중심 데이터 아키텍처 또는 **클라우드 기반 기계 학습**을 수용합니다.
* 고객은 클라우드로 지속적인 데이터 배달이 용이하도록 **종단 간 데이터 흐름**을 설정하고 솔루션을 **운영**하려고 합니다.
* 고객은 솔루션의 지식 및 소유권을 성공적으로 완료 시 고객에게 이전할 수 있도록 초기 파일럿 구현 중에 적극적으로 참여할 **리소스를 전용** 할 준비가 됩니다.
* 고객 리소스는 **숙련된 데이터 전문가**여야 하며 가급적이면 데이터 과학자여야 합니다.

위의 조건을 기반으로 한 사용 사례의 자격은 사용 사례의 성공률을 크게 개선할 수 있으며 향후 사용 사례의 구현을 위한 발판으로 삼을 수 있습니다.

### <a name="cloud-based-solutions"></a>클라우드 기반 솔루션
Azure에서 Cortana Intelligence Suite는 클라우드에 상주하는 통합된 환경입니다. 클라우드 환경에서 고급 분석 솔루션의 배포는 비즈니스에 상당한 이점을 제공하는 동시에 여전히 온-프레미스 IT 솔루션을 사용하는 회사의 중대한 변화를 의미할 수 있습니다. 에너지 분야 내에서 운영을 클라우드로 점진적으로 마이그레이션하는 추세가 분명합니다. 위의 **산업 동향**에 설명된 것처럼 이러한 추세는 스마트 그리드의 개발과 함께 밀접하게 연결됩니다. 이 플레이 북은 에너지 영역의 클라우드 기반 솔루션에 초점을 두므로 클라우드 기반 솔루션 배포 시 이점 및 기타 고려 사항을 설명해야 합니다.

아마도 클라우드 기반 솔루션의 가장 큰 장점은 비용입니다. 솔루션은 클라우드 배포 구성 요소를 활용하므로 이와 관련된 사전 투자 비용 또는 매출원가(COGS) 구성 요소 비용이 없습니다. 즉, 하드웨어, 소프트웨어 및 IT 유지 관리에 투자가 필요 없으므로 비즈니스 위험이 크게 줄어듭니다.

또 다른 중요한 장점은 클라우드 기반 솔루션의 종량제 비용 구조입니다. 계산 또는 저장소용 클라우드 기반 서버는 필요에 따라 배포 및 확장할 수 있습니다. 따라서 클라우드 기반 솔루션에는 비용 효율성 이점이 제공됩니다.

마지막으로, IT 유지 관리 또는 향후 인프라 개발이 클라우드 기반 제품에 포함되므로 투자가 필요하지 않습니다. 이처럼 Cortana Intelligence Suite는 동급 최고의 서비스를 포함하며 이에 대한 로드맵은 계속 진화하고 있습니다. 새로운 기능, 구성 요소 및 기능이 지속적으로 도입되고 개발되고 있습니다.

클라우드로 전환을 이제 시작하는 회사의 경우 클라우드 마이그레이션 로드맵을 구현하여 점진적인 방법을 취하는 것이 좋습니다. 에너지 영역의 공익 사업체 및 회사의 경우 이 플레이 북에 설명된 사용 사례를 통해 클라우드에서 예측 분석 솔루션을 파일럿할 수 있는 뛰어난 기회를 얻을 수 있습니다.

#### <a name="business-case-justification-considerations"></a>비즈니스 사례 근거 고려 사항
대부분의 경우 고객은 클라우드 기반 솔루션 및 기계 학습이 중요한 구성 요소인 특정 사용 사례에 대한 비즈니스 근거를 만드는 데 관심이 있을 수 있습니다. 온-프레미스 솔루션과 달리 클라우드 기반 솔루션의 경우 사전 투자 비용 구성 요소는 최소 수준이며 대부분의 비용 요소는 실제 사용과 관련됩니다. Cortana Intelligence Suite에서 에너지 예측 솔루션을 배포하는 것과 관련해서 여러 서비스를 하나의 공통 비용 구조로 통합할 수 있습니다. 예를 들어 데이터베이스(*예:*, SQL Azure)를 원시 데이터를 저장하는 데 사용한 후 실제 예측에서는 예측 서비스를 호스팅하는 데 Azure 기계 학습을 사용합니다. 이 예제에서는 비용 구조에 저장소 및 트랜잭션 구성 요소가 포함될 수 있습니다.

반면에 에너지 수요 예측 운영(단기 또는 장기)의 비즈니스 가치에 대해 잘 이해해야 합니다. 실제로 각 예측 작업에서 비즈니스 가치를  실현하는 것이 중요합니다. 예를 들어, 다음 24시간 동안의 전원 부하를 정확하게 예측하면 과잉 생산을 방지할 수 있으며 그리드에 오버로드를 방지하는 데 도움이 되며 재정 절감 관점에서 일 단위로 정량화할 수 있습니다.

수요 예측 솔루션의 재정적 이익을 계산하는 기본 수식은 다음과 같습니다. ![수요 예측 솔루션의 재정적 이익을 계산하는 기본 수식](media/cortana-analytics-playbook-demand-forecasting-energy/financial-benefit-formula.png)

Cortana Intelligence Suite는 종량제 가격 책정 모델을 제공하므로 이 수식에 고정 비용 요소가 발생할 필요가 없습니다. 이 수식은 매일, 매월 또는 매년 단위로 계산할 수 있습니다.

현재 Cortana Intelligence Suite 및 Azure 기계 학습 가격 계획은 [여기](http://azure.microsoft.com/pricing/details/machine-learning/)에서 확인할 수 있습니다.

### <a name="solution-development-process"></a>솔루션 개발 프로세스
에너지 수요 예측 솔루션의 개발 주기는 일반적으로 4단계를 포함하며 모두 Cortana Intelligence Suite 내에서 클라우드 기반 기술 및 서비스를 활용합니다.

이 내용은 다음 다이어그램에서 설명됩니다.

![스마트 그리드 주기](media/cortana-analytics-playbook-demand-forecasting-energy/smart-grid-cycle.png)

다음 단락에서는 이 4단계 프로세스를 설명합니다.

1. **데이터 수집** – 모든 고급 분석 기반 솔루션은 데이터에 의존합니다(**데이터 이해** 참조). 특히, 예측 분석 및 예측과 관련하여 지속적이고 동적인 데이터 흐름을 사용합니다. 에너지 수요 예측의 경우 이 데이터는 스마트 측정기에서 직접 가져오거나 온-프레미스 데이터베이스에서 이미 집계될 수 있습니다. 또한 날씨 및 온도와 같은 기타 외부 데이터 원본도 활용합니다. 이 지속적인 데이터 흐름은 오케스트레이션, 예약 및 저장되어야 합니다. [Azure 데이터 팩터리](http://azure.microsoft.com/services/data-factory/) (ADF)는 이 작업을 완수하기 위한 주요 수단입니다.
2. **모델링** – 정확하고 신뢰할 수 있는 에너지 예측을 위해 과거 데이터를 활용하고 데이터에서 의미 있는 예측 패턴을 추출하는 훌륭한 모델을 개발(학습) 및 유지 관리해야 합니다. 기계 학습(ML) 영역은 더욱 고급화된 알고리즘을 정기적으로 개발하여 급속도로 성장하고 있습니다. Azure 기계 학습 스튜디오는 복잡한 워크플로 내에서 최첨단 기계 학습 알고리즘을 활용할 수 있는 우수한 사용자 환경을 제공합니다. 이러한 워크플로는 직관적인 흐름 다이어그램으로 표현되며 여기에는 데이터 준비, 기능 추출, 모델링 및 모델 평가가 포함됩니다. 사용자는 이 환경에 포함된 다양한 모델을 수백 개 가져올 수 있습니다. 이 단계의 끝으로 데이터 과학자는 충분히 평가되고 배포할 준비가 된 작업 모델을 갖게 됩니다.
   
   다음 다이어그램은 일반적인 워크플로 보여 줍니다.
   
   ![모델링 워크플로](media/cortana-analytics-playbook-demand-forecasting-energy/modeling-workflow.png)
3. **배포** – 작업 모델 다음 단계는 배포입니다. 여기서 모델은 인터넷을 통해 다양한 소비자 클라이언트로부터 동시에 호출할 수 있는 RESTful API를 노출하는 웹 서비스로 변환됩니다. Azure 기계 학습은 한 번의 단추 클릭으로 Azure 기계 학습 스튜디오에서 모델을 직접 배포하는 간단한 방법을 제공합니다. 전체 배포 프로세스는 내부에서 발생합니다. 이 솔루션은 필요한 소비량에 맞게 자동으로 규모를 조정합니다.
4. **소비** – 이 단계에서 예측을 생성하기 위해 실제로 예측 모델을 활용합니다. 소비는 사용자 응용 프로그램(*예:*대시보드)에서 구동되거나 수요/공급 균형 유지 시스템 또는 그리드 최적화 솔루션과 같은 운영 시스템에서 직접 구동될 수 있습니다. 여러 사용 사례가 단일 모델에서 구동될 수 있습니다.

## <a name="data-understanding"></a>데이터 이해
에너지 수요 예측 솔루션의 비즈니스 고려 사항( **비즈니스 이해**참조)을 살펴보았으므로 이제 데이터 부분에 대해 논의하겠습니다. 모든 예측 분석 솔루션은 신뢰할 수 있는 데이터에 의존합니다. 에너지 수요 예측을 위해 다양한 수준의 세분성을 지닌 과거 소비량 데이터에 의존합니다. 이러한 기록 데이터는 근본 자료로 사용됩니다. 데이터 과학자가 결국에는 원하는 예측을 생성할 모델에 입력할 수 있는 예측 변수(기능이라고도 함)를 식별하도록 신중한 분석을 진행합니다.

이 섹션의 나머지 부분에서는 데이터 및 데이터를 사용 가능한 형식으로 가져오는 방법을 이해하는 다양한 단계와 고려 사항에 대해 설명합니다.

### <a name="the-model-development-cycle"></a>모델 개발 주기
적절한 예측 모델을 생성하려면 몇 가지 세심한 준비와 계획이 필요합니다. 모델링 프로세스를 여러 단계로 세분화하고 한 번에 한 단계에 집중하면 전체 프로세스의 결과를 크게 개선할 수 있습니다.

다음 다이어그램에서는 모델링 프로세스를 어떻게 여러 단계로 세분화하는지를 보여 줍니다.

![모델 개발 주기](media/cortana-analytics-playbook-demand-forecasting-energy/model-development-cycle.png)

볼 수 있는 것처럼 주기는 다음 6단계로 구성됩니다.

* 문제 공식화
* 데이터 수집 및 데이터 탐색
* 데이터 준비 및 기능 엔지니어링
* 모델링
* 모델 평가
* 개발

이 섹션의 나머지 부분에서 개별 단계와 각 단계에서 고려할 항목에 대해 설명합니다.

### <a name="problem-formulation"></a>문제 공식화
예측 분석 솔루션을 구현하기 전에 수행해야 하는 가장 중요한 단계로 문제 공식화를 고려할 수 있습니다. 여기서 비즈니스 문제를 변환하고 데이터 및 모델링 기법을 사용하여 해결할 수 있는 특정 요소로 분해합니다. 일련의 질문에 대답하는 방식으로 문제를 공식화하는 것도 좋은 방법입니다. 다음은 에너지 수요 예측의 범위 내에서 적용할 수 있는 몇 가지 가능한 질문입니다.

* 1시간 또는 하루에 개별 변전소에서 예상되는 부하는?
* 내 그리드 환경에서 최고 수요가 발생하는 시간은?
* 내 그리드에서 예상된 최고 부하를 감당할 가능성은?
* 하루 중 매시간 동안 발전소에서 생성하는 전력의 양은?

이러한 질문을 공식화하면 적합한 데이터를 가져오고 직면한 비즈니스 문제에 잘 맞는 솔루션을 구현하는 데 집중할 수 있습니다. 또한 모델의 성능을 평가할 수 있는 몇 가지 주요 메트릭을 설정할 수 있습니다. 예를 들어 예측의 정확도는 얼마나 되어야 하며 비즈니스에서 허용 가능한 오차 범위는 무엇인지 등을 설정할 수 있습니다.

### <a name="data-sources"></a>데이터 원본
최신 스마트 그리드는 그리드의 다양한 부분과 구성 요소에서 데이터를 수집합니다. 이 데이터는 전력망의 운영 및 활용의 다양한 측면을 나타냅니다. 에너지 수요 예측 범위 내에서 실제 수요 소비량을 반영하는 데이터 원본으로 논의를 제한하고 있습니다. 한 가지 중요한 에너지 소비량 원본은 스마트 측정기입니다. 전 세계 공익 사업체는 자신의 소비자에게 스마트 측정기를 신속하게 배포하고 있습니다. 스마트 측정기는 실제 전원 소비량을 기록하고 이 데이터를 다시 공익 사업체에 지속적으로 릴레이합니다. 데이터가 수집되고 5분~1시간 단위 범위의 고정된 간격으로 다시 전송됩니다. 가정 내에서 실제 소비량을 원격으로 제어하고 균형을 이루도록 고급 스마트 측정기를 프로그래밍할 수 있습니다. 스마트 측정기 데이터는 비교적 신뢰할 수 있으며 타임스탬프를 포함합니다. 따라서 수요 예측에 중요한 요소입니다. 측정기 데이터를 변압기, 변전소, 하위 지역 *등*의 그리드 토폴로지 내에서 다양한 수준으로 집계(합계)할 수 있습니다. 그런 다음 원하는 집계 수준을 선택하여 해당 예측 모델을 구축할 수 있습니다. 예를 들어 공익 사업체에서 각 그리드 변전소의 향후 부하를 예측하려는 경우 각 개별 변전소에 대한 모든 측정기 데이터를 집계하여 예측 모델의 입력으로 사용할 수 있습니다. 스마트 측정기를 내부 데이터 원본으로 참조합니다.

신뢰할 수 있는 에너지 수요 예측은 다른 외부 데이터 원본에 따라서도 좌우됩니다. 전력 소비량에 영향을 주는 한 가지 중요한 요소는 날짜이며 더 정확히 말해 온도입니다. 과거 데이터는 외부 온도와 전력 소비량 간의 강력한 상관 관계를 보여 줍니다. 더운 여름 동안 소비자는 에어컨을 사용하며 겨울에는 난방 시스템을 가동합니다. 따라서 그리드 위치에서 과거 온도에 대한 신뢰할 수 있는 원본이 핵심 요소입니다. 또한 전력 소비량의 예측 변수로 온도의 정확한 예측을 사용합니다.

다른 외부 데이터 원본도 에너지 수요 예측 모델을 구축하는 데 도움이 될 수 있습니다. 여기에는 장기 기후 변동, 경제 지수(*예:*GDP) 등이 포함될 수 있습니다. 이 문서에서는 이러한 다른 데이터 원본은 포함하지 않습니다.

### <a name="data-structure"></a>데이터 구조
필요한 데이터 원본을 식별한 후 수집된 원시 데이터가 정확한 데이터 기능을 포함하는지 확인합니다. 신뢰할 수 있는 수요 예측 모델을 구축하려면 수집된 데이터가 향후 수요를 예측하는 데 도움이 될 수 있는 데이터 요소를 포함하는지 확인해야 합니다. 다음은 원시 데이터의 데이터 구조(스키마)와 관련된 몇 가지 기본적인 요구 사항입니다.

원시 데이터는 행과 열로 이루어져 있습니다. 각 측정은 데이터의 단일 행으로 표시됩니다. 데이터의 각 행에는 기능 또는 필드라고도 하는 여러 열이 포함됩니다.

1. **타임스탬프** – 타임스탬프 필드는 측정이 기록된 실제 시간을 나타냅니다. 일반 날짜/시간 형식 중 하나를 준수해야 합니다. 날짜와 시간 부분 모두 포함해야 합니다. 대부분의 경우 두 번째 단위까지 시간을 기록하지 않아도 됩니다. 데이터가 기록되는 표준 시간대를 지정하는 것이 중요합니다.
2. **측정기 ID** - 이 필드는 측정기 또는 측정 장치를 식별합니다. 범주 변수이며 문자와 숫자 조합을 사용할 수 있습니다.
3. **소비량 값** - 특정 날짜/시간의 실제 소비량입니다. 소비량은 kWh(킬로와트-시간) 또는 기타 선호하는 단위로 측정할 수 있습니다. 측정 단위는 모든 데이터 측정값에서 일관되게 유지되어야 한다는 것에 유의하세요. 경우에 따라 소비량은 3개의 전원 단계를 통해 공급될 수 있습니다. 이 경우 모두 독립적인 소비 단계로 수집해야 합니다.
4. **온도** – 일반적으로 온도는 독립적인 원본에서 수집됩니다. 그러나 소비량 데이터와 호환되어야 합니다. 위에 설명된 대로 실제 소비량 데이터와 동기화할 수 있도록 타임스탬프를 포함해야 합니다. 온도 값은 섭씨 또는 화씨로 지정할 수 있지만 모든 측정값에서 일관성을 유지해야 합니다.
5. **위치** - 일반적으로 위치 필드는 온도 데이터가 수집된 곳과 관련됩니다. 우편 번호 또는 위도/경도(lat/long) 형식으로 나타낼 수 있습니다.

다음 표에서는 소비량 및 온도 데이터 형식에 대한 좋은 예를 보여 줍니다.

| **Date** | **Time** | **측정기 ID** | **1단계** | **2단계** | **3단계** |
| --- | --- | --- | --- | --- | --- |
| 7/1/2015 |10:00:00 |ABC1234 |7.0 |2.1 |5.3 |
| 7/1/2015 |10:00:01 |ABC1234 |7.1 |2.2 |4.3. |
| 7/1/2015 |10:00:02 |ABC1234 |6.0 |2.1 |4.0 |

| **Date** | **Time** | **위치** | **온도** |
| --- | --- | --- | --- |
| 7/1/2015 |10:00:00 |11242 |24.4 |
| 7/1/2015 |10:00:01 |11242 |24.4 |
| 7/1/2015 |10:00:02 |11242 |24.5 |

위에서 볼 수 있듯이 이 예에서는 3개의 전원 단계와 관련된 소비량에 대해 3개의 다른 값을 포함합니다. 또한 날짜 및 시간 필드가 구분되었으나 단일 열로 조합할 수 있습니다. 이 경우 위치 열은 5자리 우편 번호 형식으로 표현되며 온도는 섭씨 형식입니다.

### <a name="data-format"></a>데이터 형식
Cortana Intelligence Suite는 CSV, TSV, JSON *등*의 가장 일반적인 데이터 형식을 지원할 수 있습니다. 프로젝트의 전체 수명 주기에서 데이터 형식을 일관성 있게 유지하는 것이 중요합니다.

### <a name="data-ingestion"></a>데이터 수집
에너지 수요 예측은 지속적으로 자주 예측되므로 원시 데이터가 확실하고 신뢰할 수 있는 데이터를 통해 흐르고 있는지 확인해야 합니다. 수집 프로세스는 필요한 시간에 예측 프로세스에 원시 데이터를 사용할 수 있음을 보장해야 합니다. 이것은 데이터 수집 빈도가 예측 빈도보다 커야 함을 의미합니다.

예를 들어, 수요 예측 솔루션이 매일 오전 8시에 새 예측을 생성하는 경우 지난 24시간 동안 수집된 모든 데이터가 해당 지점까지 완전히 수집되었고 마지막 시간 데이터까지도 포함하는지 확인해야 합니다.

이 작업을 완수하도록 Cortana Intelligence Suite는 신뢰할 수 있는 데이터 수집 프로세스를 지원하는 다양한 방법을 제공합니다. 이 내용에 대해서는 이 문서의 **배포** 섹션에서 추가로 설명됩니다.

### <a name="data-quality"></a>데이터 품질
신뢰할 수 있는 정확한 수요 예측을 수행하는 데 필요한 원시 데이터 원본은 몇 가지 기본적인 데이터 품질 기준을 충족해야 합니다. 일부 발생할 수 있는 데이터 품질 문제에 대한 보정을 위해 고급 통계 메서드를 사용할 수 있지만 새 데이터를 수집할 때 일부 기준이 되는 데이터 품질 임계값을 넘는지 계속 확인해야 합니다. 원시 데이터 품질에 관한 몇 가지 고려 사항은 다음과 같습니다.

* **누락 값** – 특정 측정값이 수집되지 않는 상황을 나타냅니다. 여기서 기본 요구 사항은 주어진 기간 동안 누락 값 비율이 10%를 넘지 않아야 합니다. 단일 값이 누락된 경우 '0'이 아닌, 유효한 측정값일 수 있는 미리 정의된 값(예: '9999')을 사용하여 표시해야 합니다.
* **측정 정확도** – 소비량 또는 온도의 실제 값을 정확하게 기록해야 합니다. 정확하지 않은 측정값은 정확하지 않은 예측을 생성합니다. 일반적으로 측정 오차는 실제 값을 기준으로 1%보다 작아야 합니다.
* **측정 시간** – 수집된 데이터의 실제 타임스탬프가 실제 측정값의 정확한 시간을 기준으로 10초 이상 벗어나지 않아야 합니다.
* **동기화** - 여러 데이터 원본을 사용하는 경우(*예:*소비량 및 온도) 이들 간에 시간 동기화 문제가 없는지 확인해야 합니다. 즉, 어떤 두 개의 독립적인 데이터 원본에서 수집된 타임스탬프 간의 시간 차이가 10초를 넘지 않아야 합니다.
* **대기 시간** - 위에서 설명한 것처럼 **데이터 수집**에서 신뢰할 수 있는 데이터 흐름 및 수집 프로세스에 의존합니다. 이를 제어하기 위해서는 데이터 대기 시간을 제어하는지 확인해야 합니다. 대기 시간은 실제 측정이 이루어진 시간과 Cortana Intelligence Suite 저장소에 로드되어 사용할 준비가 된 시간 사이의 시간 차이로 지정됩니다. 단기 부하 예측의 경우 총 대기 시간은 30분을 넘지 않아야 합니다. 장기 부하 예측의 경우 총 대기 시간은 1일을 넘지 않아야 합니다.

### <a name="data-preparation-and-feature-engineering"></a>데이터 준비 및 기능 엔지니어링
원시 데이터가 수집되어( **데이터 수집**참조) 안전하게 저장되었으면 처리할 준비가 된 것입니다. 기본적으로 데이터 준비 단계는 원시 데이터를 가져와 이를 모델링 단계를 위한 형태로 변환(형식 변환, 모양 변경)합니다. 여기에는 원시 데이터 열을 실제 측정값, 표준화된 값과 함께 그대로 사용하는 간단한 작업과 [시간 지연](https://en.wikipedia.org/wiki/Lag_operator)등과 같은 보다 복잡한 작업이 포함될 수 있습니다. 새로 만든 데이터 열을 데이터 기능이라고 하며 이를 데이터를 생성하는 과정을 기능 엔지니어링이라고 합니다. 이 프로세스의 끝부분에서는 원시 데이터에서 파생되고 모델링에 사용할 수 있는 새 데이터 집합을 갖게 됩니다. 또한 데이터 준비 단계에서는 누락 값( **데이터 품질**참조)을 처리하고 이를 보정해야 합니다. 일부 경우에는 데이터를 정규화하여 모든 값을 동일한 크기에 표시해야 합니다.

이 섹션에서는 에너지 수요 예측 모델에 포함되는 일반적인 데이터 기능 중 일부를 나열합니다.

**시간 기반 기능:** 이러한 기능은 날짜/타임스탬프 데이터에서 파생됩니다. 이러한 기능은 추출되어 다음과 같은 범주 기능으로 변환됩니다.

* 시간 - 0부터 23까지의 값을 사용하는 시간입니다.
* 요일 - 요일을 나타내며 1(일요일)부터 7(토요일)까지의 값을 사용합니다.
* 월간 일자 – 실제 날짜를 나타내며 1부터 31까지의 값을 사용할 수 있습니다.
* 연간 월 – 월을 나타내며 1(1월)부터 12(12월)까지의 값을 사용합니다.
* 주말 - 평일인 경우 0, 주말인 경우 1 값을 사용하는 이진 값 기능입니다.
* 휴일 - 휴일이 아닌 경우 0, 휴일인 경우 1 값을 사용하는 이진 값 기능입니다.
* 푸리에 항 – 푸리에 항은 타임스탬프에서 파생되는 가중치이며 데이터에서 계절성(주기)을 캡처하는 데 사용됩니다. 데이터에 여러 계절이 포함될 수 있으므로 푸리에 항을 곱해야 할 수 있습니다. 예를 들어 수요 값에는 3 푸리에 항이 발생하는 연간, 주별 및 일별 계절/주기가 포함될 수 있습니다.

**독립 측정 기능:** 독립 기능은 모델에서 예측 변수로 사용할 모든 데이터 요소를 포함합니다. 여기서 예측해야 하는 종속 기능은 제외합니다.

* 지연 기능 - 실제 수요의 시간 변동 값입니다. 예를 들어, 지연 1 기능은 현재 타임스탬프를 기준으로 이전 시간(시간별 데이터 가정)의 수요 값을 보유합니다. 마찬가지로 지연 2, 지연 3 *등*을 추가할 수 있습니다. 사용되는 지연 기능의 실제 조합은 모델 결과를 평가하여 모델링 단계 중에 결정됩니다.
* 장기 추세 – 이 기능은 연간 수요의 선형 성장을 나타냅니다.

**종속 기능:** 종속 기능은 모델에서 예측할 데이터 열입니다. [감독 기계 학습](https://en.wikipedia.org/wiki/Supervised_learning)과 함께, 먼저 종속 기능(레이블로도 참조됨)을 사용하여 모델을 학습해야 합니다. 이를 통해 모델은 종속 기능과 관련된 데이터에서 패턴을 학습할 수 있습니다. 에너지 수요 예측에서는 일반적으로 실제 수요를 예측하고자 하므로 종속 기능으로 사용합니다.

**누락 값 처리:** 데이터 준비 단계 중 누락 값을 처리할 최적의 전략을 결정해야 합니다. 다양한 통계 [데이터 대체 메서드](https://en.wikipedia.org/wiki/Imputation_\(statistics\))를 사용하여 주로 수행됩니다. 에너지 수요 예측의 경우 일반적으로 이전에 제공되는 데이터 요소에서 이동 평균을 사용하여 누락 값을 대체합니다.

**데이터 정규화:** 데이터 정규화는 수요 예측과 같은 모든 숫자 데이터를 유사한 규모로 가져오는 데 사용하는 또 다른 변환 유형입니다. 일반적으로 모델 정확도와 정밀도를 개선하는 데 도움이 됩니다. 보통 실제 값을 데이터 범위로 나누는 방법으로 수행합니다.
원래 값을 더 작은 범위(일반적으로 -1과 1 사이)로 규모를 조정합니다.

## <a name="modeling"></a>모델링
모델링 단계는 데이터가 모델로 변환되는 과정을 거치는 단계입니다. 이 프로세스의 코어에는 과거 데이터(학습 데이터)를 검색하고 패턴을 추출하며 모델을 구축하는 고급 알고리즘이 있습니다. 이 모델은 나중에 모델을 구축하는 데 사용되지 않은 새 데이터에 대해 예측하는 데 사용할 수 있습니다.

작동하는 신뢰할 수 있는 모델이 있으면 이를 사용하여 필요한 기능(X)을 포함하도록 구조화된 새 데이터의 점수를 매길 수 있습니다. 점수 매기기 프로세스는 지속되는 모델(학습 단계의 개체)을 사용하며 Ŷ로 표시되는 대상 변수를 예측합니다.

### <a name="demand-forecasting-modeling-techniques"></a>수요 예측 모델링 기법
수요 예측의 경우 시간 기준으로 정렬된 과거 데이터를 사용합니다. 일반적으로 [시계열](https://en.wikipedia.org/wiki/Time_series)이라는 시간 차원을 포함하는 데이터를 말합니다. 시계열 모델링의 목표는 시간 관련 추세, 계절성, 자동 상관관계(시간에 따른 상관관계)를 찾고 이를 모델로 공식화하는 것입니다.

최근 몇 년간, 시계열 예측을 포함하고 예측 정확도를 향상하기 위한 고급 알고리즘 개발되었습니다. 여기에서 몇 가지 알고리즘을 간단히 다루겠습니다.

> [!NOTE]
> 이 섹션은 기계 학습 및 예측 개요로 사용하기에는 적합하지 않으나 수요 예측에 자주 사용되는 모델링 기법에 대한 간단한 설문 조사로 사용됩니다. 시계열 예측에 대한 자세한 내용 및 교육 자료는 온라인 설명서 [예측: 원칙 및 사례](https://www.otexts.org/book/fpp)를 사용하는 것이 좋습니다.
> 
> 

#### <a name="ma-moving-averagehttpswwwotextsorgfpp62"></a>[**MA(이동 평균)**](https://www.otexts.org/fpp/6/2)
이동 평균은 시계열 예측에 사용된 최초 분석 기법 중 하나로, 오늘날까지 가장 널리 사용되는 기법 중 하나입니다. 보다 고급 예측 기법을 위한 기초이기도 합니다. 이동 평균을 통해 K 최근 요소의 평균을 구하여 다음 데이터 요소를 예측합니다. 여기서 K는 이동 평균의 계수를 나타냅니다.

이동 평균 기법은 예측을 평활화하는 효과가 있으므로 데이터의 큰 변동성을 제대로 처리하지 못할 수 있습니다.

#### <a name="ets-exponential-smoothinghttpswwwotextsorgfpp75"></a>[**ETS(지수 평활법)**](https://www.otexts.org/fpp/7/5)
ETS(지수 평활법)는 다음 데이터 요소를 예측하기 위해 최근 데이터 요소에 대한 가중치가 적용된 평균을 사용하는 다양한 메서드 제품군입니다. 최신 값에 더 높은 가중치를 할당하고 이전에 측정된 값에 대해 이 가중치를 점진적으로 감소시키는 개념입니다. 이 제품군에는 다양한 메서드가 있으며 이중 일부는 [Holt-Winters Seasonal Method](https://www.otexts.org/fpp/7/5)처럼 데이터에서 계절성 처리를 포함합니다.

이러한 메서드 중 일부도 데이터의 계절성을 고려합니다.

#### <a name="arima-auto-regression-integrated-moving-averagehttpswwwotextsorgfpp8"></a>[**ARIMA(자동 회귀 통합 이동 평균)**](https://www.otexts.org/fpp/8)
ARIMA(자동 회귀 통합 이동 평균)는 시계열 예측에 일반적으로 사용되는 메서드의 또 다른 제품군입니다. 실질적으로 자동 회귀 메서드를 이동 평균과 결합합니다. 자동 회귀 메서드는 다음 날짜 요소를 계산하기 위해 이전 시계열 값을 가져다가 회귀 모델을 사용합니다. 또한 ARIMA 메서드는 데이터 요소 간 차이 계산을 포함하는 차이점 보관용 메서드를 적용하고 원래 측정된 값 대신 계산된 값을 사용합니다. 마지막으로, ARIMA에서는 위에서 설명한 이동 평균 기법도 활용합니다. 이러한 모든 메서드를 다양한 방법으로 조합하여 ARIMA 메서드 제품군이 생성됩니다.

오늘날, ETS 및 ARIMA는 에너지 수요 예측 및 다른 많은 예측 문제에 널리 사용되고 있습니다. 대부분의 경우 매우 정확한 결과를 달성하기 위해 함께 조합하여 사용합니다.

**일반 다중 회귀** 회귀 모델은 기계 학습 및 통계 분야에서 가장 중요한 모델링 방법일 수 있습니다. 시계열의 컨텍스트에서 회귀를 사용하여 미래 값(*예:*수요의 값)을 예측합니다. 회귀에서는 예측 변수의 선형 조합을 사용하고 학습 프로세스 중에 이러한 예측 변수의 가중치(계수라고도 함)를 학습합니다. 예측된 값을 예상할 회귀선을 생성하는 것을 목표로 합니다. 회귀 메서드는 대상 변수가 숫자일 경우 적합하므로 시계열 예측에도 알맞습니다. [선형 회귀](https://en.wikipedia.org/wiki/Linear_regression)처럼 매우 단순한 회귀 모델부터 의사 결정 트리, [임의 포리스트](https://en.wikipedia.org/wiki/Random_forest), [신경망](https://en.wikipedia.org/wiki/Artificial_neural_network), 향상된 의사 결정 트리처럼 보다 고급 모델까지 광범위한 회귀 메서드가 있습니다.

에너지 수요 예측을 회귀 문제로 생성하면 데이터 기능을 선택하는 데 상당한 유연성이 제공되어 실제 수요 시계열 데이터와 온도와 같은 외부 요인을 결합할 수 있습니다. 선택한 기능에 대한 자세한 내용은 이 플레이 북의 기능 엔지니어링( **데이터 준비 및 기능 엔지니어링**참조) 섹션에 나와 있습니다.

에너지 수요 예측 파일럿의 구현 및 배포 경험을 통해 Azure 기계 학습에 제공되는 고급 회귀 모델이 최적의 결과를 생성하는 경향이 있음을 알게 되었으며 이 회귀 모델을 활용합니다.

## <a name="model-evaluation"></a>모델 평가
모델 평가는 **모델 개발 주기**내에서 중요한 역할을 담당합니다. 이 단계에서는 모델과 해당 성능의 유효성 검사를 실제 데이터와 함께 살펴봅니다. 모델링 단계 중에는 모델 학습에 사용할 수 있는 데이터의 일부를 사용합니다. 평가 단계 중에는 모델을 테스트하는 데 나머지 데이터를 사용합니다. 실질적으로 이것은 모델에 재구성된 새 데이터를 공급하고 있음을 의미하며 학습 데이터 집합과 동일한 기능을 포함합니다. 그러나 유효성 검사 프로세스 중에는 사용 가능한 대상 변수를 제공하기보다는 대상 변수를 예측하는 데 모델을 사용합니다. 이 프로세스 보통 모델 점수 매기기라고 합니다. 그런 다음 실제 대상 값을 사용하고 이를 예측된 값과 비교합니다. 여기서는 예측값과 실제 값 간의 차이를 의미하는 예측 오차를 최소화하고 측정하는 것을 목표로 합니다. 모델을 미세 조정하고 실제로 오차가 감소하고 있는지 여부를 확인하려고 하므로 오차 측정을 정량화하는 것이 핵심입니다. 모델일 미세 조정하는 것은 학습 과정을 제어하는 모델 매개 변수를 수정하거나 데이터 기능을 추가 또는 제거하여 수행할 수 있습니다( [매개 변수 스윕](https://channel9.msdn.com/Blogs/Azure/Data-Science-Series-Building-an-Optimal-Model-With-Parameter-Sweep)이라고 함). 실질적으로 오차를 원하는 수준까지 줄을 때까지 기능 엔지니어링, 모델링 및 모델 평가 단계를 여러 번 반복해야 함을 의미할 수 있습니다.

모든 결과를 완벽하게 예측할 수 있는 모델은 없으므로 예측 오차는 0일 수 없다는 것을 강조해야 합니다. 단, 비즈니스에서 허용 가능한 특정 오차 범위는 있습니다. 유효성 검사 프로세스 중에 모델 예측 오차가 비즈니스 허용 오차 수준 이하인지 확인합니다. 따라서 주기 시작 시 **문제 공식화** 단계 중에 허용 오차 수준을 설정해야 합니다.

### <a name="typical-evaluation-techniques"></a>일반적인 평가 기법
다양한 방법으로 예측 오차를 측정하고 정량화할 수 있습니다. 이 섹션에서는 특히 에너지 수요 예측에서 시계열과 관련된 평가 기법을 중점적으로 설명합니다.

#### <a name="mapehttpsenwikipediaorgwikimeanabsolutepercentageerror"></a>[**MAPE**](https://en.wikipedia.org/wiki/Mean_absolute_percentage_error)
MAPE는 절대 평균 백분율 오차(Mean Absolute Percentage Error)를 나타냅니다. MAPE를 통해 각 예측 지점과 해당 지점의 실제 값 간의 차이를 계산합니다. 그런 다음 실제 값을 기준으로 차이의 비율을 계산하여 지점당 오차를 정량화합니다. 마지막 단계에서는 이러한 값의 평균을 구합니다. MAPE에 사용되는 수학 공식은 다음과 같습니다.

![MAPE 공식](media/cortana-analytics-playbook-demand-forecasting-energy/mape-formula.png)
*여기서 <sub>t</sub>는 실제 값이고 F<sub>t</sub>는 예측된 값이며 n은 예측 기간입니다.*

## <a name="deployment"></a>배포
모델링 단계를 완료하고 모델 성능의 유효성을 검사했으면 배포 단계로 이동할 준비가 된 것입니다. 이 컨텍스트에서 배포를 통해 고객은 대규모로 실제 예측을 실행하여 모델을 사용할 수 있습니다. 데이터에서 단지 정보를 얻는 것이 아니라 지속적으로 예측을 호출하는 것이 주된 목표이므로 Azure 기계 학습에서 배포 개념이 중요합니다. 배포 단계는 모델을 대규모로 사용할 수 있도록 하는 단계입니다.

에너지 수요 예측의 컨텍스트 내에서는 지속적이고 정기적인 예측을 호출하는 동시에 모델에 대해 최신 데이터를 사용할 수 있고 예측된 데이터를 다시 소비 클라이언트로 전송하도록 하는 것을 목표로 합니다.

### <a name="web-services-deployment"></a>웹 서비스 배포
Azure 기계 학습에서 기본 배포 가능한 구성 요소는 웹 서비스입니다. 클라우드에서 예측 모델을 사용할 수 있는 가장 효과적인 방법입니다. 웹 서비스는 모델을 캡슐화하여 [RESTful](http://www.restapitutorial.com/) API(응용 프로그래밍 인터페이스)로 래핑합니다. 아래 다이어그램에 나타난 것처럼 클라이언트 코드의 일부로 API를 사용할 수 있습니다.

![배포 및 소비 서비스](media/cortana-analytics-playbook-demand-forecasting-energy/web-service-deployment-and-consumption.png)

보다시피 웹 서비스는 Cortana Intelligence Suite 클라우드에 배포되고 노출된 REST API 끝점을 통해 호출할 수 있습니다. 다양한 도메인 간 서로 다른 유형의 클라이언트는 Web API를 통해 서비스를 동시에 호출할 수 있습니다. 또한 웹 서비스는 수천 개의 동시 호출을 지원하도록 확장할 수 있습니다.

### <a name="a-typical-solution-architecture"></a>일반적인 솔루션 아키텍처
에너지 수요 예측 솔루션을 배포할 때는 예측 웹 서비스 범위를 넘어서고 전체 데이터 흐름을 원활하게 해주는 종단 간 솔루션을 배포하는 데 관심이 있습니다. 새 예측을 호출하는 시점에 모델에 최신 데이터 기능이 공급되는지 확인해야 합니다. 즉, 새로 수집된 원시 데이터를 지속적으로 수집, 처리하고 모델이 구축되었던 필수 기능 집합으로 변환합니다. 이와 동시에 예측된 데이터를 최종 소비 클라이언트에 제공하고자 합니다. 데이터 흐름 주기(또는 데이터 파이프라인)의 예가 아래 다이어그램에 나와 있습니다.

![에너지 수요 예측 종단 간 데이터 흐름](media/cortana-analytics-playbook-demand-forecasting-energy/energy-demand-forecase-end-data-flow.png)

다음은 에너지 수요 예측 주기의 일환으로 수행되는 단계입니다.

1. 수백만 개의 배포된 데이터 측정기가 실시간으로 전력 소비량 데이터를 계속 생성합니다.
2. 이 데이터는 수집되어 클라우드 리포지토리(*예:*Azure Blob)에 업로드됩니다.
3. 처리하기 전에 원시 데이터를 비즈니스에서 정의한 대로 변전소 또는 하위 지역 수준으로 집계합니다.
4. 그런 다음 기능 처리(**데이터 준비 및 기능 처리** 참조)가 수행되고 모델 학습 또는 점수 매기기에 필요한 데이터가 생성됩니다. 기능 집합 데이터는 데이터베이스(*예:* SQL Azure)에 저장됩니다.
5. 예측 모델을 다시 학습하기 위해 재학습 서비스가 호출됩니다. 이 모델의 업데이트 버전이 유지되어 점수 매기기 웹 서비스에서 사용할 수 있습니다.
6. 점수 매기기 웹 서비스는 필요한 예측 빈도에 따른 일정으로 호출됩니다.
7. 예측된 데이터는 최종 소비 클라이언트가 액세스할 수 있는 데이터베이스에 저장됩니다.
8. 소비 클라이언트는 예측을 검색하여 이를 다시 그리드에 적용하고 필요한 사용 사례에 따라 사용합니다.

이 전체 주기는 완전 자동화되고 일정에 따라 실행됨을 유의하세요. 이 데이터 주기의 전체 오케스트레이션은 [Azure 데이터 팩터리](http://azure.microsoft.com/services/data-factory/)와 같은 도구를 사용하여 수행할 수 있습니다.

### <a name="end-to-end-deployment-architecture"></a>종단 간 배포 아키텍처
Cortana Intelligence에 에너지 수요 예측 솔루션을 실제로 배포하려면 필수 구성 요소가 제대로 설정 및 구성되어 있어야 합니다.

다음 다이어그램에서는 위에서 설명된 데이터 흐름 주기를 구현 및 오케스트레이션하는 일반적인 Cortana Intelligence 기반 아키텍처를 보여 줍니다.

![종단 간 배포 아키텍처](media/cortana-analytics-playbook-demand-forecasting-energy/architecture.png)

각 구성 요소 및 전체 아키텍처에 대한 자세한 내용은 에너지 솔루션 템플릿을 참조하세요.

